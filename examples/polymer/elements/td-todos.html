<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/flatiron-director/flatiron-director.html">
<link rel="import" href="../bower_components/iron-selector/iron-selector.html">
<link rel="import" href="td-input.html">
<link rel="import" href="td-item.html">

<dom-module id="td-todos">
	<template>
		<flatiron-director id="router" route="{{route}}"></flatiron-director>
		<section id="todoapp">
			<header id="header">
				<input is="td-input" id="new-todo" placeholder="What needs to be done?" autofocus on-td-input-commit="addTodoAction" on-td-input-cancel="cancelAddTodoAction">
			</header>
			<template is="dom-if" if="{{hasTodos(items.length)}}">
				<section id="main">
					<input id="toggle-all" type="checkbox" on-change="toggleAllCompletedAction" checked="[[areAllCompleted]]">
					<label for="toggle-all">Mark all as complete</label>
					<ul id="todo-list" on-td-destroy-item="destroyItemAction">
						<template id="todo-list-repeater" is="dom-repeat" items="{{items}}" filter="matchesFilter" observe="completed">
							<li is="td-item" item="{{item}}"></li>
						</template>
					</ul>
				</section>
			</template>
			<template is="dom-if" if="{{hasTodos(items.length)}}">
				<footer id="footer">
					<span id="todo-count"><strong>{{getActiveCount(items, items.*)}}</strong> <span>{{getItemWord(items, items.*)}}</span> left</span>
					<iron-selector on-tap="onTap" id="filters" selected="{{getSelectedRoute(route)}}}}" attr-for-selected="name">
						<li name="all">
							<a href="#/">All</a>
						</li>
						<li name="active">
							<a href="#/active">Active</a>
						</li>
						<li name="completed">
							<a href="#/completed">Completed</a>
						</li>
					</iron-selector>
					<template is="dom-if" if="{{anyCompleted(items, items.*)}}">
						<button id="clear-completed" on-click="clearCompletedAction" style="visibility:visible">Clear completed</button>
					</template>
				</footer>
			</template>
		</section>
	</template>
</dom-module>
<script src="td-todos.js"></script>
