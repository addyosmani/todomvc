/*
 * tipJS - OpenSource Javascript MVC Framework ver.1.21
 * 
 * Copyright 2012.07 SeungHyun PAEK
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * HomePage: http://www.tipjs.com
 * Contact: http://www.tipjs.com/contact
 */
var tipJS=tipJS||{};tipJS.ver=tipJS.version="1.21";(function(){var j=function(V,W){for(var i in W){if(V[i]){continue}V[i]=W[i]}return V};var f=function(Y,i){if(!i||typeof i!="object"||(!i.__name&&!i.name)){throw"Please check your "+Y+" definition"}var W=(i.__name)?i.__name:i.name;if(typeof(W)!="string"){throw"Please check your "+Y+" definition"}var V=W.split("."),X=V[0],W=V[1],Z=G(X);if(!Z){throw"Please check your "+Y+" definition"}if(Z.loadOrder.presentOrder()===Y){if(Y=="controllers"){i.__appName__=X}else{if(i.__name){delete i.__name}}q.department[X]=q.department[X]||{};q.department[X][Y]=q.department[X][Y]||{};q.department[X][Y][W]=i}};var J=function(Z,V){if(V===q.OBJECT_TEMPLATE.loadOrder.order[0]){return r(Z[V])}var Y=Z.name,W=o.path[V],X=o.applicationPath[Y],i=r(Z[V]);return y(X,W,i)};var y=function(X,aa,Z){var W=[];for(var V=0,Y=Z.length;V<Y;V++){W.push(X+k(aa)+Z[V])}return W};var O=function(V,i){if(i.nocache===true){V=(V.indexOf("?")<0)?V+"?":V+"&";V=V+i.paramName+"="+i.version}return V};var u=function(X,W,V){var i=document.createElement("script");i.type="text/javascript";i.src=O(X,W);i.charset=o.charSet;if(V){var Y=false;i.onreadystatechange=function(){if(this.readyState=="loaded"||this.readyState=="complete"){if(Y==true){return}Y=true;V(this)}};i.onload=function(){if(!document.all){V(this)}}}document.getElementsByTagName("head")[0].appendChild(i)};var b=function(V,X,W){var i=function(Y){if(t(V,X,Y.src)){S(V)}};u(W,B(V),i)};var x=function(V,Y){K(V,Y);var W=h(V);var aa=J(W,Y);q[V][Y].requireList=aa;if(aa.length>0){for(var X=0,Z=aa.length;X<Z;X++){b(V,Y,aa[X])}}else{S(V)}};var v=tipJS.loadCommonModel=function(i,Y){var W=q.common.models;if(!W[i]||W[i]==undefined){throw"Could not find commonModel: "+i}if(Y===true){var V=q.common.syncModels;if(!V){V=q.common.syncModels={}}if(!V[i]){V[i]=c(W[i]);if(i.lastIndexOf("VO")==(i.length-2)){return V[i]}V[i].loadCommonModel=v}return V[i]}var X=c(W[i]);if(i.lastIndexOf("VO")==(i.length-2)){return X}X.loadCommonModel=v;return X};var n=function(V,aa,i){var Z=(!i)?R():i,X=q.department[Z].models;if(!X[V]||X[V]==undefined){throw"Could not find model: "+V}if(aa===true){var W=q.department[Z].syncModels;if(!W){W=q.department[Z].syncModels={}}if(!W[V]){W[V]=c(X[V]);if(V.lastIndexOf("VO")==(V.length-2)){return W[V]}W[V].loadCommonModel=v;W[V].loadModel=n}return W[V]}var Y=c(X[V]);if(V.lastIndexOf("VO")==(V.length-2)){return Y}Y.loadCommonModel=v;Y.loadModel=n;return Y};var U=tipJS.loadModel=function(V,Z){var aa=(typeof(Z)==="boolean")?Z:false;try{var W=V.split("."),Y=W[0],i=W[1];return n(i,aa,Y)}catch(X){throw"tipJS.loadModel : invalid parameter"}};var G=function(i){return L[i]};var h=function(i){return L[i].define};var B=function(i){var W={};var V=h(i);if(V){var X=V.noCacheVersion;if(V.noCacheAuto===true){X=""+Math.random()}W.nocache=V.noCache;W.version=X;W.paramName=V.noCacheParam}return W};var D=function(){return L.controllerStack[L.controllerStack.length-1]};var R=tipJS.getLiveAppName=function(){return D().__appName__};var S=function(V){var Z=G(V);if(Z.loadOrder.isLastOrder()===false){x(V,Z.loadOrder.nextOrder());return}var i=function(ac){var ab=q.common.views;if(!ab[ac]||ab[ac]==undefined){throw"Could not find commonView: "+ac}var aa=c(ab[ac]);aa.loadCommonView=i;aa.renderTemplate=e;return aa};var Y=function(ac){var ab=q.department[R()].views;if(!ab[ac]||ab[ac]==undefined){throw"Could not find view: "+ac}var aa=c(ab[ac]);aa.loadCommonView=i;aa.loadView=Y;aa.renderTemplate=e;return aa};var X=Z.controller=q.department[V].controllers;if(X){for(var W in X){X[W].loadCommonModel=v;X[W].loadCommonView=i;X[W].loadModel=n;X[W].loadView=Y;X[W].renderTemplate=e}}(function(ab){var af=G(ab);af.define.onLoad(af.onLoadParam);if(z&&z[ab]){var ac=z[ab];for(var ae=0,ad=ac.length;ae<ad;ae++){var aa=ac[ae];tipJS.action(aa.name,aa.param)}delete z[ab]}})(V)};var t=function(V,X,aa){var Z=q[V][X].requireList;for(var W=0,Y=Z.length;W<Y;W++){if(Z[W]===true){continue}if(aa.indexOf(Z[W])>=0){Z[W]=true;break}}for(var W=0,Y=Z.length;W<Y;W++){if(Z[W]!==true){return false}}return true};var k=function(i){return g.pathDiv+i+g.pathDiv};var c=tipJS.cloneObject=function(W){if(typeof W=="boolean"||typeof W=="number"||typeof W=="string"){return W}var V=(W instanceof Array)?[]:{};for(var i in W){V[i]=(W[i]&&typeof W[i]=="object")?c(W[i]):W[i]}return V};var C=tipJS.echo=function(X,V,W){if(W&&(typeof W!="string"||typeof W=="string"&&W.split(".").length>5)){return}if(!V){V=""}if(X===null||X===undefined){console.log(((W)?W+".":"")+X);return}if(typeof X=="boolean"||typeof X=="number"||typeof X=="string"){if(typeof X==V||V==""){console.log(((W)?W+".":"")+X)}return}for(var i in X){if(X[i]&&X[i] instanceof Array){console.log(((W)?W+".":"")+i+":Array");C(X[i],V,((W)?W+".":"")+i)}else{if(X[i]&&typeof X[i]=="object"){console.log(((W)?W+".":"")+i+":Object");C(X[i],V,((W)?W+".":"")+i)}else{if(typeof X[i]==V||V==""){console.log(((W)?W+".":"")+i+":"+X[i])}}}}};var r=function(W){var Y=[],V=W.length;for(var Z=0;Z<V;Z++){for(var X=Z+1;X<V;X++){if(W[Z]===W[X]){X=++Z}}Y.push(W[Z])}return Y};var K=function(i,V){q[i]=q[i]||{};q[i][V]=q[i][V]||{}};var E=function(X,W){for(var Y=0,V=W.length;Y<V;Y++){var Z=W[Y];if(X.noCache&&X.noCache===true){Z+=(Z.indexOf("?")<0)?"?":"&";Z+=(X.noCacheParam?X.noCacheParam:o.noCacheParam)+"=";if(X.noCacheAuto===true){Z+=Math.random()}else{Z+=(X.noCacheVersion?X.noCacheVersion:o.noCacheVersion)}}document.write('<script type="text/javascript" charset="'+(X.charSet?X.charSet:o.charSet)+'" src="'+Z+'"><\/script>')}};tipJS.config=function(W){if(W.commonLib){E(W,W.commonLib);delete W.commonLib}if(W.commonModel){E(W,W.commonModel);delete W.commonModel}if(W.commonView){E(W,W.commonView);delete W.commonView}o=j(W,q.OBJECT_TEMPLATE.config);if(tipJS.isDevelopment===null){var V=window.location.hostname;for(var Y=0,X=o.developmentHostList.length;Y<X;Y++){if(V.match(o.developmentHostList[Y])!==null){tipJS.isDevelopment=true;break}}}};var a=function(){var i=new Date();return(i.getHours()*60*60+i.getMinutes()*60+i.getSeconds())+(i.getMilliseconds()/1000)};tipJS.benchmark={};var w={};tipJS.benchmark.mark=function(i){w[i]=a()};tipJS.benchmark.elapsedTime=function(i,X,V){var W=w[i],Z=w[X],Y=Z-W;if(V){V(i,X,W,Z,Y)}else{tipJS.log("elapsed time["+i+" to "+X+"] : "+Y+" seconds","[BENCHMARK]")}};var H=function(){var i=false;if(window.XMLHttpRequest){i=new XMLHttpRequest()}else{if(window.ActiveXObject){try{i=new ActiveXObject("Msxml2.XMLHTTP")}catch(W){try{i=new ActiveXObject("Microsoft.XMLHTTP")}catch(V){}}}}return i};var e=function(X){var W=B(R()),Z=O(X.url,W),i=H();i.open("GET",Z,false);try{i.send(null)}catch(Y){return null}if(i.readyState==4&&i.status==200){var V=i.responseText;V=M(V,X.data);if(typeof X.renderTo=="string"){document.getElementById(X.renderTo).innerHTML+=V}return V}else{throw"Could not find template file:"+Z}};var M=function(V,Y){V=V.replace(/\r\n/g,"\n");V=V.replace(/\r/g,"\n");V=V.replace(/\\/g,"\\\\");V=V.replace(/\n/g,"\\n");V=V.replace(/"/g,'\\"');var i=V.split("\\n"),W=N(i),X=new Function("data",W);return X(Y)};var N=function(ad){var ag=[],ae=[],ab="PLANE",af="VALUE",W="PARSE",Z="__temp_HTML__.push(";ag.push("var __temp_HTML__ = [];");for(var Y=0,ac=ad.length;Y<ac;Y++){var aa=ad[Y];ae.push(ab);if(aa.indexOf("@>")>-1){if(aa.indexOf("<@=")>-1){ae[Y]=af}else{if(aa.indexOf("<@")>-1){ae[Y]=W}else{for(var X=ae.length-1;X>=0;X--){if(ad[X].indexOf("<@")>-1&&ae[X]==ab){for(var V=X;V<=Y;V++){ae[V]=W}break}}}}}}for(var Y=0,ac=ae.length;Y<ac;Y++){var aa=ad[Y];if(ae[Y]==af){aa='"'+aa+'"';aa=aa.replace(/<@=/g,'"+');aa=aa.replace(/@>/g,'+"');ag.push(Z+aa+");")}else{if(ae[Y]==W){aa=aa.replace(/<@/g,"");aa=aa.replace(/@>/g,"");ag.push(aa)}else{aa='"'+aa+'"';ag.push(Z+aa+");")}}}ag.push("return __temp_HTML__.join('');");return ag.join("")};tipJS.commonModel=function(i){if(!i||typeof i!="object"||(!i.__name&&!i.name)){throw"Please check your CommonModel definition"}var V=(i.__name)?i.__name:i.name;if(typeof(V)!="string"){throw"Please check your CommonModel definition"}if(i.__name){delete i.__name}q.common.models[V]=i};tipJS.commonView=function(i){if(!i||typeof i!="object"||(!i.__name&&!i.name)){throw"Please check your CommonView definition"}var V=(i.__name)?i.__name:i.name;if(typeof(V)!="string"){throw"Please check your CommonView definition"}if(i.__name){delete i.__name}q.common.views[V]=i};var g=(function(){var i={pathDiv:"/",blank:"",extJS:"js",extDiv:"."};return i})();tipJS.log=function(W,X){window.console=window.console||{log:function(){},error:function(){}};var ab=new Date(),i=ab.getFullYear(),ad=ab.getMonth()+1,Y=ab.getDate(),ac=ab.getHours(),V=ab.getMinutes(),Z=ab.getSeconds(),aa=ab.getMilliseconds();console.log(((X)?X:"")+i+"/"+ad+"/"+Y+" "+ac+":"+V+":"+Z+"."+aa+" "+W)};tipJS.debug=function(i){if(tipJS.isDevelopment){tipJS.log(i,"[DEBUG]")}};tipJS.controller=function(i){f("controllers",i)};tipJS.model=function(i){f("models",i)};tipJS.view=function(i){f("views",i)};tipJS.action=function(ae,V){var af,Z,ab;try{af=ae.split(".");Z=af[0];ab=af[1];if(Z.length==0||ab.length==0){throw""}}catch(aa){throw"tipJS.action : invalid parameter"}var ad=G(Z);if(!ad||!ad.loadOrder||!ad.loadOrder.isLastOrder()){z=z||{};z[Z]=z[Z]||[];z[Z].push({name:ae,param:V});return}if(!ad.controller||!ad.controller[ab]){throw"Could not find controller: "+ae}var i;if(tipJS.isDevelopment===true){i=a()}var X=c(ad.controller[ab]);if(X){var W={controllerName:(X.__name)?X.__name:X.name,controller:X,beforeController:ad.define.beforeController,afterController:ad.define.afterController};if(W.beforeController){var Y=W.beforeController(V);if(Y===false){return}Y=true}var ac=function(){try{var aj=function(){if(W.controller.afterInvoke){W.controller.afterInvoke(V)}};var ag=function(){var ak=true;if(W.controller.invoke){W.retValue=X.invoke(V)}if(ak!==false){aj()}};var ah=function(){var ak=true;if(W.controller.beforeInvoke){ak=W.controller.beforeInvoke(V)}if(ak!==false){ag()}};L.controllerStack=L.controllerStack||[];L.controllerStack.push(X);ah();L.controllerStack.pop()}catch(ai){L.controllerStack.pop();if(W.controller.exceptionInvoke){W.controller.exceptionInvoke(ai,V)}else{L.controllerStack=[];throw ai}}if(W.afterController){W.afterController(V)}if(tipJS.isDevelopment===true){tipJS.debug(ae+" completed in "+(a()-i)+" seconds")}};if(W.controller.async===true){setTimeout(ac,0)}else{ac()}}else{throw"Could not find controller"}};tipJS.loadApp=function(Z,aa){for(var V=0,W=Z.length;V<W;V++){var Y=Z[V],X=[];if(aa){L[Y]=L[Y]||{};L[Y].onLoadParam=aa}X.push(o.applicationPath[Y]);X.push(g.pathDiv);X.push(o.defineFileName);X.push(g.extDiv);X.push(g.extJS);setTimeout(function(){if(!L[Y].define){throw"Could not find application: "+Y}},1000);u(X.join(g.blank),{nocache:true,version:Math.random(),paramName:o.noCacheParam})}};tipJS.define=function(W){W=j(W,q.OBJECT_TEMPLATE.define);if(W.noCache===undefined){W.noCache=o.noCache;W.noCacheVersion=o.noCacheVersion;W.noCacheParam=o.noCacheParam;W.noCacheAuto=o.noCacheAuto}else{if(W.noCache===true){if(W.noCacheVersion===undefined){W.noCacheVersion=o.noCacheVersion}if(W.noCacheParam===undefined){W.noCacheParam=o.noCacheParam}if(W.noCacheAuto===undefined){W.noCacheAuto=o.noCacheAuto}}}var i=W.name;L[i]=L[i]||{};L[i].loadOrder={};L[i].loadOrder=j(L[i].loadOrder,q.OBJECT_TEMPLATE.loadOrder);var V=L[i].loadOrder.presentOrder();K(i,V);L[i].define=W;x(i,V)};var q={};q.OBJECT_TEMPLATE={config:{noCache:false,noCacheVersion:1,noCacheParam:"noCacheVersion",noCacheAuto:false,charSet:"utf-8",defineFileName:"define",path:{controllers:"controllers",models:"models",views:"views"},developmentHostList:[],applicationPath:{}},define:{extLib:[],controllers:[],models:[],views:[],templates:[],onLoad:function(){},beforeController:function(){},afterController:function(){}},loadOrder:{index:0,init:function(){this.index=0},presentOrder:function(){return this.order[this.index]},nextOrder:function(){return this.order[++this.index]},isLastOrder:function(){return(this.index+1)==this.order.length},order:["extLib","controllers","models","views"]}};q.department=q.department||{};q.common=q.common||{};q.common.models=q.common.models||{};q.common.views=q.common.views||{};var L={controllerStack:[]},z={},o=j({},q.OBJECT_TEMPLATE.config),l=window.location.pathname,P=window.location.search,I=document.getElementsByTagName("script"),F,d,m,s,A=null,Q=o.developmentHostList;for(var T=0,p=I.length;T<p;T++){d=I[T].src;m=d.match(/tipJS-MVC-1\.21\.js$/);if(m){F=d.substring(0,d.length-m[0].length);break}}document.write('<script type="text/javascript" charset="UTF-8" src="'+F+"tipJS.config.js?"+o.noCacheParam+"="+Math.random()+'"><\/script>');if(P.match("(\\?|&)debug")!==null||l.match("debug")!==null){A=true}else{if(P.match("(\\?|&)nodebug")!==null||l.match("nodebug")!==null){A=false}}tipJS.isDevelopment=A})();