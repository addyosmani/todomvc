/*
 * tipJS - OpenSource Javascript MVC Framework ver.1.23
 * 
 * Copyright 2012.07 SeungHyun PAEK
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * HomePage: http://www.tipjs.com
 * Contact: http://www.tipjs.com/contact
 */
var tipJS=tipJS||{};tipJS.ver=tipJS.version="1.23";(function(){var j=function(V,W){for(var i in W){if(V[i]){continue}V[i]=W[i]}return V};var f=function(Y,i){if(!i||typeof i!="object"||(!i.__name&&!i.name)){throw"Please check your "+Y+" definition"}var W=(i.__name)?i.__name:i.name;if(typeof(W)!="string"){throw"Please check your "+Y+" definition"}if(i.__extend&&i.__extend===W&&Y!="controllers"){throw"Can't extend itself"}var V=W.split("."),X=V[0],W=V[1],Z=G(X);if(!Z){throw"Please check your "+Y+" definition"}if(Z.loadOrder.presentOrder()===Y){if(Y=="controllers"){i.__appName__=X}else{if(i.__name){delete i.__name}}p.department[X]=p.department[X]||{};p.department[X][Y]=p.department[X][Y]||{};p.department[X][Y][W]=i}};var J=function(Z,V){if(V===p.OBJECT_TEMPLATE.loadOrder.order[0]){return r(Z[V])}var Y=Z.name,W=o.path[V],X=o.applicationPath[Y],i=r(Z[V]);return y(X,W,i)};var y=function(X,Z,Y){var W=[];for(var V=Y.length;V--;){W.push(X+k(Z)+Y[V])}return W};var O=function(V,i){if(i.nocache===true){V=(V.indexOf("?")<0)?V+"?":V+"&";V=V+i.paramName+"="+i.version}return V};var u=tipJS.loadJS=function(X,W,V){var i=document.createElement("script");i.type="text/javascript";i.src=O(X,W);i.charset=o.charSet;if(V){if(i.readyState){i.onreadystatechange=function(){if(this.readyState=="loaded"||this.readyState=="complete"){this.onreadystatechange=null;V(this)}}}else{i.onload=function(){V(this)}}}document.getElementsByTagName("head")[0].appendChild(i)};var b=function(V,X,W){var i=function(Y){if(t(V,X,Y.src)){S(V)}};u(W,B(V),i)};var x=function(V,Y){K(V,Y);var W=h(V);var Z=J(W,Y);p[V][Y].requireList=Z;if(Z.length>0){for(var X=Z.length;X--;){b(V,Y,Z[X])}}else{S(V)}};var v=tipJS.loadCommonModel=function(V,Z){var X=p.common.models;if(!X[V]||X[V]==undefined){throw"Could not find commonModel: "+V}if(Z===true){var W=p.common.syncModels;if(!W){W=p.common.syncModels={}}if(!W[V]){var i=W[V]=c(X[V]);if(i.__extend&&typeof i.__extend==="string"){i=j(i,v(i.__extend));delete i.__extend}if(V.lastIndexOf("VO")==(V.length-2)){return i}i.loadCommonModel=v;return i}else{return W[V]}}var Y=c(X[V]);if(Y.__extend&&typeof Y.__extend==="string"){Y=j(Y,v(Y.__extend));delete Y.__extend}if(V.lastIndexOf("VO")==(V.length-2)){return Y}Y.loadCommonModel=v;return Y};var n=function(Y,ab,Z){var W=(!Z)?R():Z,X=p.department[W].models;if(!X[Y]||X[Y]==undefined){throw"Could not find model: "+Y}if(ab===true){var ac=p.department[W].syncModels;if(!ac){ac=p.department[W].syncModels={}}if(!ac[Y]){var V=ac[Y]=c(X[Y]);if(V.__extend&&typeof V.__extend==="string"){var i=V.__extend.split(".");if(i.length==2){V=j(V,n(i[1],false,i[0]))}else{V=j(V,v(V.__extend))}delete V.__extend}if(Y.lastIndexOf("VO")==(Y.length-2)){return V}V.loadCommonModel=v;V.loadModel=n;return V}else{return ac[Y]}}var aa=c(X[Y]);if(aa.__extend&&typeof aa.__extend==="string"){var i=aa.__extend.split(".");if(i.length==2){aa=j(aa,n(i[1],false,i[0]))}else{aa=j(aa,v(aa.__extend))}delete aa.__extend}if(Y.lastIndexOf("VO")==(Y.length-2)){return aa}aa.loadCommonModel=v;aa.loadModel=n;return aa};var U=tipJS.loadModel=function(V,Z){var aa=(typeof(Z)==="boolean")?Z:false;try{var W=V.split("."),Y=W[0],i=W[1];return n(i,aa,Y)}catch(X){throw"tipJS.loadModel : invalid parameter"}};var G=function(i){return L[i]};var h=function(i){return L[i].define};var B=function(i){var W={};var V=h(i);if(V){var X=V.noCacheVersion;if(V.noCacheAuto===true){X=""+Math.random()}W.nocache=V.noCache;W.version=X;W.paramName=V.noCacheParam}return W};var D=function(){return L.controllerStack[L.controllerStack.length-1]};var R=tipJS.getLiveAppName=function(){return D().__appName__};var S=function(V){var Z=G(V);if(Z.loadOrder.isLastOrder()===false){x(V,Z.loadOrder.nextOrder());return}var i=function(ac){var ab=p.common.views;if(!ab||!ab[ac]||ab[ac]==undefined){throw"Could not find commonView: "+ac}var aa=c(ab[ac]);aa.loadCommonView=i;aa.renderTemplate=e;if(aa.__extend&&typeof aa.__extend==="string"){aa=j(aa,i(aa.__extend));delete aa.__extend}return aa};var Y=function(af,aa){var ae=(!aa)?R():aa,ad=p.department[ae].views;if(!ad||!ad[af]||ad[af]==undefined){throw"Could not find view: "+af}var ac=c(ad[af]);ac.loadCommonView=i;ac.loadView=Y;ac.renderTemplate=e;if(ac.__extend&&typeof ac.__extend==="string"){var ab=ac.__extend.split(".");if(ab.length==2){ac=j(ac,Y(ab[1],ab[0]))}else{ac=j(ac,i(ac.__extend))}delete ac.__extend}return ac};var X=Z.controller=p.department[V].controllers;if(X){for(var W in X){X[W].loadCommonModel=v;X[W].loadCommonView=i;X[W].loadModel=n;X[W].loadView=Y;X[W].renderTemplate=e}}(function(ab){var af=G(ab);af.define.onLoad(af.onLoadParam);if(z&&z[ab]){var ac=z[ab];for(var ae=0,ad=ac.length;ae<ad;ae++){var aa=ac[ae];tipJS.action(aa.name,aa.param)}delete z[ab]}})(V)};var t=function(V,X,Z){var Y=p[V][X].requireList;for(var W=Y.length;W--;){if(Y[W]===true){continue}if(Z.indexOf(Y[W])>=0){Y[W]=true;break}}for(var W=Y.length;W--;){if(Y[W]!==true){return false}}return true};var k=function(i){return g.pathDiv+i+g.pathDiv};var c=tipJS.cloneObject=function(i){if(typeof Object.create==="function"){return Object.create(i)}c=tipJS.cloneObject=function(W){function V(){}V.prototype=W;return new V()};return c(i)};var C=tipJS.echo=function(X,V,W){if(W&&(typeof W!="string"||typeof W=="string"&&W.split(".").length>5)){return}if(!V){V=""}if(X===null||X===undefined){console.log(((W)?W+".":"")+X);return}if(typeof X=="boolean"||typeof X=="number"||typeof X=="string"){if(typeof X==V||V==""){console.log(((W)?W+".":"")+X)}return}for(var i in X){if(X[i]&&X[i] instanceof Array){console.log(((W)?W+".":"")+i+":Array");C(X[i],V,((W)?W+".":"")+i)}else{if(X[i]&&typeof X[i]=="object"){console.log(((W)?W+".":"")+i+":Object");C(X[i],V,((W)?W+".":"")+i)}else{if(typeof X[i]==V||V==""){console.log(((W)?W+".":"")+i+":"+X[i])}}}}};var r=tipJS.uniqueArray=function(W){var Y=[],V=W.length;for(var Z=0;Z<V;Z++){for(var X=Z+1;X<V;X++){if(W[Z]===W[X]){X=++Z}}Y.push(W[Z])}return Y};var K=function(i,V){p[i]=p[i]||{};p[i][V]=p[i][V]||{}};var E=function(X,W){for(var Y=0,V=W.length;Y<V;Y++){var Z=W[Y];if(X.noCache&&X.noCache===true){Z+=(Z.indexOf("?")<0)?"?":"&";Z+=(X.noCacheParam?X.noCacheParam:o.noCacheParam)+"=";if(X.noCacheAuto===true){Z+=Math.random()}else{Z+=(X.noCacheVersion?X.noCacheVersion:o.noCacheVersion)}}document.write('<script type="text/javascript" charset="'+(X.charSet?X.charSet:o.charSet)+'" src="'+Z+'"><\/script>')}};tipJS.config=function(W){if(W.commonLib){E(W,W.commonLib);delete W.commonLib}if(W.commonModel){E(W,W.commonModel);delete W.commonModel}if(W.commonView){E(W,W.commonView);delete W.commonView}o=j(W,p.OBJECT_TEMPLATE.config);if(tipJS.isDevelopment===null){var V=window.location.hostname;for(var X=o.developmentHostList.length;X--;){if(V.match(o.developmentHostList[X])!==null){tipJS.isDevelopment=true;break}}}};var a=function(){var i=new Date();return(i.getHours()*60*60+i.getMinutes()*60+i.getSeconds())+(i.getMilliseconds()/1000)};tipJS.benchmark={};var w={};tipJS.benchmark.mark=function(i){w[i]=a()};tipJS.benchmark.elapsedTime=function(i,X,V){var W=w[i],Z=w[X],Y=Z-W;if(V){V(i,X,W,Z,Y)}else{tipJS.log("elapsed time["+i+" to "+X+"] : "+Y+" seconds","[BENCHMARK]")}};var H=function(){var i=false;if(window.XMLHttpRequest){i=new XMLHttpRequest()}else{if(window.ActiveXObject){try{i=new ActiveXObject("Msxml2.XMLHTTP")}catch(W){try{i=new ActiveXObject("Microsoft.XMLHTTP")}catch(V){}}}}H=function(){return i};return H()};var e=function(X){var Z=R();if(h(Z).templateCache&&q[X.url]){var W=M(q[X.url],X.data);if(typeof X.renderTo=="string"){document.getElementById(X.renderTo).innerHTML+=W}return W}var V=B(Z),aa=O(X.url,V),i=H();i.open("GET",aa,false);try{i.send(null)}catch(Y){return null}if(i.readyState==4&&i.status==200){var W=q[X.url]=i.responseText;W=M(W,X.data);if(typeof X.renderTo=="string"){document.getElementById(X.renderTo).innerHTML+=W}return W}else{throw"Could not find template file:"+aa}};var M=function(V,X){V=V.replace(/\r\n/g,"\n");V=V.replace(/\r/g,"\n");V=V.replace(/\\/g,"\\\\");V=V.replace(/\n/g,"\\n");V=V.replace(/"/g,'\\"');var i=V.split("\\n"),W=new Function("data",N(i));return W(X)};var N=function(ad){var ag=[],ae=[],ab="PLANE",af="VALUE",W="PARSE",Z="__temp_HTML__.push(";ag.push("var __temp_HTML__ = [];");for(var Y=0,ac=ad.length;Y<ac;Y++){var aa=ad[Y];ae.push(ab);if(aa.indexOf("@>")>-1){if(aa.indexOf("<@=")>-1){ae[Y]=af}else{if(aa.indexOf("<@")>-1){ae[Y]=W}else{for(var X=ae.length-1;X>=0;X--){if(ad[X].indexOf("<@")>-1&&ae[X]==ab){for(var V=X;V<=Y;V++){ae[V]=W}break}}}}}}for(var Y=0,ac=ae.length;Y<ac;Y++){var aa=ad[Y];if(ae[Y]==af){aa='"'+aa+'"';aa=aa.replace(/<@=/g,'"+');aa=aa.replace(/@>/g,'+"');ag.push(Z+aa+");")}else{if(ae[Y]==W){aa=aa.replace(/<@/g,"");aa=aa.replace(/@>/g,"");ag.push(aa)}else{aa='"'+aa+'"';ag.push(Z+aa+");")}}}ag.push("return __temp_HTML__.join('');");return ag.join("")};tipJS.commonModel=function(i){if(!i||typeof i!="object"||(!i.__name&&!i.name)){throw"Please check your CommonModel definition"}var V=(i.__name)?i.__name:i.name;if(typeof(V)!="string"){throw"Please check your CommonModel definition"}if(i.__extend&&i.__extend===V){throw"Can't extend itself"}if(i.__name){delete i.__name}p.common.models[V]=i};tipJS.commonView=function(i){if(!i||typeof i!="object"||(!i.__name&&!i.name)){throw"Please check your CommonView definition"}var V=(i.__name)?i.__name:i.name;if(typeof(V)!="string"){throw"Please check your CommonView definition"}if(i.__extend&&i.__extend===V){throw"Can't extend itself"}if(i.__name){delete i.__name}p.common.views[V]=i};var g=(function(){var i={pathDiv:"/",blank:"",extJS:"js",extDiv:"."};return i})();tipJS.log=function(W,X){window.console=window.console||{log:function(){},error:function(){}};var ab=new Date(),i=ab.getFullYear(),ad=ab.getMonth()+1,Y=ab.getDate(),ac=ab.getHours(),V=ab.getMinutes(),Z=ab.getSeconds(),aa=ab.getMilliseconds();console.log(((X)?X:"")+i+"/"+ad+"/"+Y+" "+ac+":"+V+":"+Z+"."+aa+" "+W)};tipJS.debug=function(i){if(tipJS.isDevelopment){tipJS.log(i,"[DEBUG]")}};tipJS.controller=function(i){f("controllers",i)};tipJS.model=function(i){f("models",i)};tipJS.view=function(i){f("views",i)};tipJS.action=function(ae,V){var af,Z,ab;try{af=ae.split(".");Z=af[0];ab=af[1];if(Z.length==0||ab.length==0){throw""}}catch(aa){throw"tipJS.action : invalid parameter"}var ad=G(Z);if(!ad||!ad.loadOrder||!ad.loadOrder.isLastOrder()){z=z||{};z[Z]=z[Z]||[];z[Z].push({name:ae,param:V});return}if(!ad.controller||!ad.controller[ab]){throw"Could not find controller: "+ae}var i;if(tipJS.isDevelopment===true){i=a()}var X=c(ad.controller[ab]);if(!X){throw"Could not find controller"}var W={controllerName:(X.__name)?X.__name:X.name,controller:X,beforeController:ad.define.beforeController,afterController:ad.define.afterController};if(W.beforeController){var Y=W.beforeController(V);if(Y===false){return}Y=true}var ac=function(){var aj=W.controller;try{var ak=function(){if(aj.afterInvoke){aj.afterInvoke(V)}};var ag=function(){var al=true;if(aj.invoke){al=aj.invoke(V)}if(al!==false){ak()}};var ah=function(){var al=true;if(aj.beforeInvoke){al=aj.beforeInvoke(V)}if(al!==false){ag()}};L.controllerStack=L.controllerStack||[];L.controllerStack.push(aj);ah();L.controllerStack.pop()}catch(ai){L.controllerStack.pop();if(aj.exceptionInvoke){aj.exceptionInvoke(ai,V)}else{L.controllerStack=[];throw ai}}if(W.afterController){W.afterController(V)}if(tipJS.isDevelopment===true){tipJS.debug(ae+" completed in "+(a()-i)+" seconds")}};if(W.controller.async===true){setTimeout(ac,15)}else{ac()}};tipJS.loadApp=function(Z,aa){for(var V=0,W=Z.length;V<W;V++){var Y=Z[V],X=[];if(aa){L[Y]=L[Y]||{};L[Y].onLoadParam=aa}X.push(o.applicationPath[Y]);X.push(g.pathDiv);X.push(o.defineFileName);X.push(g.extDiv);X.push(g.extJS);setTimeout(function(){if(!L[Y].define){throw"Could not find application: "+Y}},1000);u(X.join(g.blank),{nocache:true,version:Math.random(),paramName:o.noCacheParam})}};tipJS.define=function(W){W=j(W,p.OBJECT_TEMPLATE.define);if(W.templateCache===undefined){W.templateCache=o.templateCache}if(W.noCache===undefined){W.noCache=o.noCache;W.noCacheVersion=o.noCacheVersion;W.noCacheParam=o.noCacheParam;W.noCacheAuto=o.noCacheAuto}else{if(W.noCache===true){if(W.noCacheVersion===undefined){W.noCacheVersion=o.noCacheVersion}if(W.noCacheParam===undefined){W.noCacheParam=o.noCacheParam}if(W.noCacheAuto===undefined){W.noCacheAuto=o.noCacheAuto}}}var i=W.name;L[i]=L[i]||{};L[i].loadOrder={};L[i].loadOrder=j(L[i].loadOrder,p.OBJECT_TEMPLATE.loadOrder);var V=L[i].loadOrder.presentOrder();K(i,V);L[i].define=W;x(i,V)};var p={};p.OBJECT_TEMPLATE={config:{noCache:false,noCacheVersion:1,noCacheParam:"noCacheVersion",noCacheAuto:false,templateCache:true,charSet:"utf-8",defineFileName:"define",path:{controllers:"controllers",models:"models",views:"views"},developmentHostList:[],applicationPath:{}},define:{extLib:[],controllers:[],models:[],views:[],templates:[],onLoad:function(){},beforeController:function(){},afterController:function(){}},loadOrder:{index:0,init:function(){this.index=0},presentOrder:function(){return this.order[this.index]},nextOrder:function(){return this.order[++this.index]},isLastOrder:function(){return(this.index+1)==this.order.length},order:["extLib","controllers","models","views"]}};p.department=p.department||{};p.common=p.common||{};p.common.models=p.common.models||{};p.common.views=p.common.views||{};var L={controllerStack:[]},q={},z={},o=j({},p.OBJECT_TEMPLATE.config),l=window.location.pathname,P=window.location.search,I=document.getElementsByTagName("script"),F,d,m,s,A=null,Q=o.developmentHostList;for(var T=I.length;T--;){d=I[T].src;m=d.match(/tipJS-MVC-1\.23\.js$/);if(m){F=d.substring(0,d.length-m[0].length);break}}document.write('<script type="text/javascript" charset="UTF-8" src="'+F+"tipJS.config.js?"+o.noCacheParam+"="+Math.random()+'"><\/script>');if(P.match("(\\?|&)debug")!==null||l.match("debug")!==null){A=true}else{if(P.match("(\\?|&)nodebug")!==null||l.match("nodebug")!==null){A=false}}tipJS.isDevelopment=A})();