this.Element&&function(t){t.matches=t.matches||t.matchesSelector||t.webkitMatchesSelector||t.msMatchesSelector||function(t){for(var e=(this.parentNode||this.document).querySelectorAll(t),n=-1;e[++n]&&e[n]!==this;);return!!e[n]}}(Element.prototype),this.Element&&function(t){t.closest=t.closest||function(t){for(var e=this;e.matches&&!e.matches(t);)e=e.parentNode;return e.matches?e:null}}(Element.prototype),tb=function(){var t;function e(t,e){var n=this;if(n.length=0,!t||t instanceof r.Selector)return n;if(t instanceof r)return[].push.call(n,t),n;switch(typeof t){case"string":r.dom(t+"[data-tb]",e||window).forEach(function(t){t.tb&&Object.keys(t.tb).forEach(function(e){[].push.call(n,t.tb[e])})});break;case"object":if(t instanceof r)return[].push.call(n,t),n;t instanceof RegExp?r.dom("[data-tb]",e||window).forEach(function(e){Object.keys(e.tb).forEach(function(o){var a=e.tb[o];a instanceof r&&a.namespace&&a.namespace.match(t)&&[].push.call(n,a)})}):t.nodeType&&t.tb?Object.keys(t.tb).forEach(function(e){[].push.call(n,t.tb[e])}):(t.constructor===Array||t.length&&t[0]&&!(t instanceof Array))&&[].forEach.call(t,function(t){var e=r(t);[].forEach.call(e,function(t){-1===[].indexOf.call(n,t)&&[].push.call(n,t)})});break;case"function":r.dom("[data-tb]",e||window).map(function(e){Object.keys(e.tb).forEach(function(o){var a=e.tb[o];a&&a instanceof r&&a instanceof t&&[].push.call(n,a)})})}return n}function n(){}function r(){if(!(this instanceof r))return new e(arguments[0]?arguments[0]:void 0,arguments[1]?arguments[1]:void 0);var t,o,a=Array.from(arguments),i="string"==typeof a[0],c=(i&&a[0].substr(0,1),i?"/"+a[0].replace(/\./g,"/").replace(/^\//,"")+".js":""),s=i?r.namespace(a[0].replace(/^\//),"").get():a[0];if(i&&!s)return o=new r(n,a[1]||{},a[2]||!1),r.require(c).then(function(t){return function(){var e=new r(t[0],t[1]||{},t[2]||!1);if(o){for(var n in o)-1===["handlers","target"].indexOf(n)&&o.hasOwnProperty(n)&&(e[n]=o[n]);!function(t,e){for(var n in t.handlers){e.handlers[n]||(e.handlers[n]=[]);for(var r=0,o=t.handlers[n].length;r<o;r++)e.handlers[n].push(t.handlers[n][r])}}(o,e)}}}(a)),o;if("function"==typeof s){if(s.__tb__||(Object.setPrototypeOf(s.prototype,r.prototype),s.__tb__="V8"),(t=new s(a[1]||{},a[2])).namespace||t instanceof n||(t.namespace="string"==typeof a[0]?a[0]:a[0].namespace||r.getId()),t.target=t.target||a[2]||!1,t.target||a[2]&&(!a[2].nodeType&&a[2][0]&&a[2][0].nodeType&&(a[2]=a[2][0]),t.target=a[2]),t.target&&t.target.nodeType&&!(t instanceof n)){t.target.tb=t.target.tb||{},t.target.tb[t.namespace]=t;var l=r.dom(t.target);if("head"!==t.target.nodeName&&-1===l.parents().toArray().indexOf(document.head)&&t.namespace&&t.namespace.replace(/\./g,"-").toUpperCase()!==t.target.tagName&&l.addClass(t.namespace.replace(/\./g,"-").toLowerCase()),t.target&&t.target.nodeType){var u=t.target.getAttribute("data-tb");u&&u.length&&-1===u.split(" ").indexOf(t.namespace)?t.target.setAttribute("data-tb",u+" "+t.namespace):t.target.setAttribute("data-tb",t.namespace)}}if(t.handlers)for(var f in t.handlers)"function"==typeof t.handlers[f]?t.handlers[f]=[t.handlers[f]]:t.handlers[f]instanceof Array||delete t.handlers[f];else t.handlers=[];if(!(t instanceof n)){t.on("ready",function(e){t.parent().trigger("ready")},!0);var d=!!t.parent()[0]&&t.parent()[0],h=function(t){t.stopImmediatePropagation()};h.once=!0,d&&(d.handlers?d.handlers.ready||(d.handlers.ready=[]):d.handlers={ready:[]},d.handlers.ready.unshift(h)),t.trigger("init"),t.trigger("ready")}return t}}function o(t,n,o){var a=Array.from(t),i=Array.from(o),c=r();return t instanceof e&&a.forEach(function(t){var r=t[n](...i);r instanceof e&&Array.from(r).forEach(function(t){-1===[].indexOf.call(c,t)&&[].push.call(c,t)})}),c}function a(t){var e=[][t];return-1<["pop","push","unshift","shift","splice"].indexOf(t)?function(){var t=e.apply(this,arguments);return t?t instanceof Array?r(t):t:this}:function(){var t=e.apply(this.toArray(),arguments);return t instanceof Array?this.flush().add(t):t}}n.prototype={namespace:"Nop"},r.extend=function(t){var e;function n(n){e.hasOwnProperty(n)&&e[n]instanceof Object&&e[n].constructor===Object?t[n]=r.extend(t[n]instanceof Object?t[n]:{},e[n]):e.hasOwnProperty(n)&&e[n]instanceof Object&&e[n].constructor===Array?t[n]=Array.from(e[n]):t[n]=e[n]}for(;arguments[1];)e=arguments[1],Object.keys(e).forEach(n),[].splice.call(arguments,1,1);return t},r.parse=function(t,e){var n=Array.prototype.slice.call(arguments);if(n.length){if(1===n.length)return n[1];if(n.length>2){for(;n.length>1;)n[0]=r.parse(n[0],n[1]),n.splice(1,1);return n[0]}if("string"==typeof t){var o=t.match(/\{[^\{\}]*\}/g);o&&o.forEach(function(n){var o=n.substr(1,n.length-2),a=r.namespace(o,e).get();void 0!==a&&(t=t.replace(n,a))})}else if(t.constructor)switch(t.constructor){case Object:Object.keys(t).forEach(function(n){t.hasOwnProperty(n)&&(t[n]=r.parse(t[n],e))});break;case Array:t.forEach(function(n,o){t[o]=r.parse(t[o],e)})}return t}console.error("no arguments give to parse")},r.debounce=function(t,e){var n;return function(){var r=this,o=arguments;clearTimeout(n),n=setTimeout(function(){t.apply(r,o)},e)}},r.store=function(){function t(t){var e=this,n=Symbol("observable"),o=Symbol("onChange"),a=t||{};e[n]=r.observable(!1),e[o]=r.debounce(function(){e[n](r.extend({},e))},0),r.extend(e,a)}function e(e,n,o){var a=new t(o);return Object.defineProperty(e,n,{enumerable:!0,writeable:!0,get:function(){return a},set:function(t){for(var e in a)delete a[e];return r.extend(a,t),a}}),e[n]}return t.methods={observe:function(t,e){this[Object.getOwnPropertySymbols(this)[0]].observe(t,e)},bind:function(t){var e=this;!function t(n){if(n.nodeType&&3===n.nodeType){var o=n.nodeValue.match(/\{[^\{\}]*\}/g);if(o){var a=(i=n.nodeValue,function(t){var e,c=!1;o.forEach(function(e){a.values[e]!==t[e]&&(a.values[e]=t[e],c=!0)}),c&&(e=i,n.nodeValue=r.parse(e,a.values))});a.values={},(o=Array.from(o).map(t=>t.substr(1,t.length-2))).forEach(function(t){a.values[t]=""}),e[Object.getOwnPropertySymbols(e)[0]].observe(a)}}var i;n.nodeType&&1===n.nodeType&&(Array.from(n.attributes).forEach(function(t){var o,a=t.value.match(/\{[^\{\}]*\}/g);if(a){var i=(o=t.value,function(e){var c,s=!1;a.forEach(function(t){i.values[t]!==e[t]&&(i.values[t]=e[t],s=!0)}),s&&(c=o,r.dom(n).attr(t.nodeName,r.parse(c,i.values)))});i.values={},(a=Array.from(a).map(t=>t.substr(1,t.length-2))).forEach(function(t){i.values[t]=""}),e[Object.getOwnPropertySymbols(e)[0]].observe(i)}}),Array.from(n.childNodes).forEach(function(e){t(e)}),e[Object.getOwnPropertySymbols(e)[0]].notify())}(t)}},t.prototype=new Proxy(t.methods,{get:function(e,n,o){if(t.methods[n])return t.methods[n];if(n in o==!1&&n in e==!1){var a=new r.Store;Object.defineProperty(o,n,{enumerable:!0,get:function(){return a},set:function(e){if(e&&"object"==typeof e&&e.constructor&&e.constructor===Object)if(a instanceof t){for(var n in a)delete a[n];r.extend(a,e)}else a=new t(e);else a=e;return setTimeout(function(){Object.getOwnPropertySymbols(o)[1]&&o[Object.getOwnPropertySymbols(o)[1]]()},0),a}})}return o[n]},set:function(e,n,o,a){var i=Array.from(arguments);if("object"==typeof o&&o.constructor===Object&&o.constructor.prototype===Object.prototype)if(a[n]instanceof t){for(var c in a[n])delete a[n][c];r.extend(t,o)}else i[0]=a,i[2]=new t(o);return setTimeout(function(){Object.getOwnPropertySymbols(a)[1]&&a[Object.getOwnPropertySymbols(a)[1]]()},0),Reflect.set(...i)}}),r.Store=t,e.Store=t,e}(),r.observable=function(t){var e=t,n=!0,o=function(t,a){function i(){if(n)return o.lastChanged=(new Date).getTime(),o.notify()}if(void 0===t)return e;if(e.constructor===Object)if("string"==typeof t){if(void 0===a)return r.namespace(t,e).get();t.indexOf(".")>-1?r.namespace(t,e).set(a):e[t]=a,i()}else"object"==typeof t&&void 0===a?(e=t,i()):console.warn("tb.observable() set value: parameter 1 should be a string or object if observed data is an object!");else{if(void 0===t)return e;e=t,i()}return o};return o.lastChanged=(new Date).getTime(),o.notifiers=[],o.notify=function(){return o.notifiers.forEach(function(t,n){"function"==typeof t?(t(e),t.once&&o.notifiers.splice(n,1)):o.notifiers.splice(n,1)}),o},o.enableNotify=function(t){return n=!1!==t,o},o.observe=function(t,e){return"function"==typeof t&&(t.once=e||!1,o.notifiers.push(t)),o},o},t=r,r.Selector=e,r.methods={trigger:function(t,o,a){var i,c=this;if(!r.stop()){if((i=t instanceof r.Event?t:new r.Event(t,o,a)).__stopped__||i.__immediateStopped__)return c;if(c instanceof e&&c.length)[].forEach.call(c,function(t){t&&t instanceof r&&!i.__immediateStopped__&&t.trigger(i)});else if(c instanceof r){if(c instanceof n&&"init"!==i.name)return c.one("init",function(){this.trigger(i)}),c;if(c instanceof r&&c.handlers&&c.handlers[i.name]&&i.bubble.indexOf("l")>-1&&(c.handlers[i.name]=c.handlers[i.name].reduce(function(t,e){if(i.bubble.indexOf("l")>-1&&e){try{i.__immediateStopped__?t.push(e):e.apply(c,[i])}catch(t){console.error(t)}e.once||i.__immediateStopped__||t.push(e)}return t},[]),c.handlers[i.name].length||delete c.handlers[i.name]),i.__stopped__)return c;setTimeout(function(){i.bubble.indexOf("u")>-1&&c.parent().trigger(new r.Event(i.name,i.data,"lu")),i.bubble.indexOf("d")>-1&&[].forEach.call(c.children(),function(t){t.trigger(new r.Event(i.name,i.data,"ld"))})},0)}return c}},on:function(t,n,a){var i,c=this;return c instanceof e?o(c,"on",Array.from(arguments)):c instanceof r&&(i=-1<t.indexOf(" ")?t.split(" "):[t],n.once=!!n.once||!!a,i.forEach(function(t){Reflect.get(c,"handlers")||(c.handlers={}),Reflect.get(c.handlers,t)?c.handlers[t].push(n):c.handlers[t]=[n]})),c},one:function(t,e){return this.on(t,e,!0),this},off:function(t,n){var a,i=this;return void 0===t?i:(i instanceof e?o(i,"off",arguments):i instanceof r&&(-1<t.indexOf(" ")?t.split(" "):[t]).forEach(function(t){if(i.handlers[t])if(void 0!==n)for(a=i.handlers[t].indexOf(n);a>-1;)i.handlers[t].splice(a,1),a=i.handlers[t].indexOf(n),0===i.handlers[t].length&&(i.handlers[t]=null,delete i.handlers[t]);else i.handlers[t]=null,delete i.handlers[t]}),i)},parents:function(t){var n=r();return this instanceof e?n=o(this,"parents",arguments):this instanceof r&&this.target&&(this.target.nodeType?r.dom(this.target).parents("[data-tb]").not("html").forEach(function(t){t&&t.tb&&Object.keys(t.tb).forEach(function(e){[].push.call(n,t.tb[e])})}):this.target instanceof r&&([].push.call(n,this.target),this.target.parent()[0]&&[].push.call(n,this.target.parent()[0]))),t?n.filter(t):n},parent:function(t){var n=r();if(this instanceof e)n=o(this,"parent",arguments);else if(this instanceof r&&this.target)if(this.target.nodeType){var a=this.parents().toArray(),i=!!a[0]&&a[0];if(!i)return n;Object.keys(i.target.tb||{}).forEach(function(t){[].push.call(n,i.target.tb[t])})}else this.target instanceof r&&[].push.call(n,this.target);return t?n.filter(t):n},descendants:function(t,n){var a=this,i=r();return a instanceof e?i=o(this,"descendants",arguments):a instanceof r&&a.target.nodeType&&!n?r.dom("[data-tb]",a.target).forEach(function(t){Object.keys(t.tb).forEach(function(e){[].push.call(i,t.tb[e])})}):a instanceof r&&n&&Object.keys(a).forEach(function(t){if("target"!==t&&a[t]instanceof r){[].push.call(i,a[t]);for(var e=r.dom().toArray.call(a[t].descendants("",!0)),n=0,o=e.length;n<o;n++)[].push.call(i,e[n])}}),t?i.filter(t):i},children:function(t,n){var a=r(),i=Array.from(arguments);if(n="undefined"!=typeof module||n,this instanceof e)a=o(this,"children",i);else if(this instanceof r&&this.target.nodeType&&!n){var c=r.getId(),s=r.dom("[data-tb]",this.target),l='[data-tempid="'+c+'"] [data-tb] [data-tb]';r.dom(this.target).attr("data-tempid",c),s.not(l).forEach(function(t,e,n){t.tb&&Object.keys(t.tb).forEach(function(e){[].push.call(a,t.tb[e])})}),r.dom(this.target).removeAttr("data-tempid")}else if(n)for(var u in this)this.hasOwnProperty(u)&&this[u]instanceof r&&[].push.call(a,this[u]);return t?a.filter(t):a},next:function(t){var n,a,i=r();return this instanceof e?i=o(this,"next",arguments):(n=this.parent().children(),a=[].indexOf.call(n,this),n.length>a+1&&[].push.call(i,n[a+1])),t?i.filter(t):i},prev:function(t){var n,a,i=r();return this instanceof e?i=o(this,"prev",arguments):(n=this.parent().children(),(a=[].indexOf.call(n,this))&&[].push.call(i,n[a-1])),t?i.filter(t):i},first:function(t){var n,a=r();return this instanceof e?a=o(this,"first",arguments):(n=this.parent().children(),[].push.call(a,n[0])),t?a.filter(t):a},last:function(t){var n,a=r();return this instanceof e?a=o(this,"last",arguments):(n=this.parent().children(),[].push.call(a,n[n.length-1])),t?a.filter(t):a},toArray:function(){return Array.from(this)},filter:function(t){var n=r(t),o=r();return t?(this instanceof e?[].forEach.call(this,function(t){-1<[].indexOf.call(n,t)&&[].push.call(o,t)}):this instanceof r&&-1<[].indexOf.call(n,this)&&[].push.call(o,this),o):this},not:function(t){var e=Array.from(r(t)),n=r();return[].forEach.call(this,function(t){-1===e.indexOf(t)&&[].push.call(n,t)}),n},add:function(t){var e=r(t).toArray();return r(this.toArray().concat(e))},flush:function(){if(this instanceof e)for(;this.length;)this.pop();return this}};var i,c=new Proxy(r.Store.methods,{get:function(t,e,n){var o=Array.from(arguments);if(!Reflect.get(...o)){var a=new r.Store;Object.defineProperty(n,e,{enumerable:!0,get:function(){return a},set:function(t){if("object"==typeof t&&t.__proto__===Object.prototype)if(a instanceof r.Store){for(var e in a)delete a[e];r.extend(a,t)}else a=new r.Store(t);else a=t;return setTimeout(function(){Object.getOwnPropertySymbols(n)[1]&&n[Object.getOwnPropertySymbols(n)[1]]()},0),a}})}return Reflect.get(...o)},set:function(t,e,n,o){var a,i=Array.from(arguments);if("handlers"!==e&&"object"==typeof n)if(o[e]instanceof r.Store&&n.__proto__===Object.prototype){for(var c in o[e])delete o[e][c];r.extend(o[e],n)}else i[0]=o;return a=Reflect.set(...i),setTimeout(function(){Object.getOwnPropertySymbols(o)[1]&&o[Object.getOwnPropertySymbols(o)[1]]()},0),a}});return Object.setPrototypeOf(r.methods,c),r.prototype=r.methods,r.status={loadCount:r.observable(0)},r.idle=function(t){var e=function(){if(0===r.status.loadCount()){var n=function(){0===r.status.loadCount()?r.status.loadCount.lastChanged===n.lastChanged?"function"==typeof t&&t():(n.lastChanged=r.status.loadCount.lastChanged,setTimeout(n,100)):r.status.loadCount.observe(e,!0)};n.lastChanged=0,setTimeout(n,100)}else r.status.loadCount.observe(e,!0)};r.status.loadCount.observe(e,!0)},e.prototype={concat:a("concat"),every:a("every"),forEach:a("forEach"),indexOf:a("indexOf"),map:a("map"),pop:a("pop"),push:a("push"),reduce:a("reduce"),reduceRight:a("reduceRight"),reverse:a("reverse"),shift:a("shift"),slice:a("slice"),some:a("some"),splice:a("splice"),unshift:a("unshift")},r.extend(e.prototype,r.methods),e.prototype.unique=function(){var t=[];return[].forEach.call(this,function(e){-1===t.indexOf(e)&&t.push(e)}),r.dom(t)},r.plugin=(i=t.prototype,function(t,e){var n=i;n[t]?console.warn("tb.plugin(): Cannot overload existing tb method (",t,")"):n[t]=e}),r}(),"undefined"!=typeof module?module.exports=tb:function(){function t(){tb.attach(document.head),tb.attach(document.body)}document.addEventListener?document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),t()},!1):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),t())})}(),tb.Event=function(t,e,n){this.bubble=n||"l",this.data=e||{},this.name=t||"",this.__stopped__=this.__immediateStopped__=!1},tb.Event.prototype={stopPropagation:function(){return this.__stopped__=!0,this},stopImmediatePropagation:function(){return this.__stopped__=!0,this.__immediateStopped__=!0,this}},tb.debug=!1,"undefined"==typeof module&&(tb.dom=function(){var t,e,n=/\S+/g,r=tb.Selector;function o(t,e,n,r){t.detachEvent?t.detachEvent("on"+e,n,r):t.removeEventListener(e,n,r)}function a(t){var e=[][t];return-1<["push","unshift"].indexOf(t)?function(){return e.apply(this,arguments),this.unique()}:function(){var t=e.apply(this,arguments);return t instanceof Array&&t[0]&&t[0].nodeType?tb.dom(t).unique():t}}return(t=function(t,e){var n,o,a=this;if(!t)return a;if(t.nodeType)-1===[].indexOf.call(a,t)&&[].push.call(a,t);else{if(t.__tbSelector__)return t;if(t instanceof r&&t[0])[].forEach.call(t,function(t){t.target&&t.target.nodeType&&-1===[].indexOf.call(a,t.target)&&[].push.call(a,t.target)});else if(t instanceof Array||t.__tbSelector__||t instanceof HTMLCollection||t instanceof NodeList)[].forEach.call(t,function(t){tb.dom(t).forEach(function(t){-1===[].indexOf.call(a,t)&&[].push.call(a,t)})});else if("string"==typeof t){var i,c,s=(i=t,(c=document.createElement("template")).innerHTML=i,c.content.childNodes?c.content.childNodes:c.childNodes);if(1!==s.length||!s[0].nodeType||3!==s[0].nodeType)return tb.dom(s);n=e&&e.nodeType?e:document,t.split(",").forEach(function(t){(o=n.querySelectorAll(t.trim()))[0]&&[].forEach.call(o,function(t){-1===[].indexOf.call(a,t)&&[].push.call(a,t)})})}}}).arrayMethods={__tbSelector__:!0,length:0,concat:a("concat"),every:a("every"),forEach:a("forEach"),indexOf:a("indexOf"),map:a("map"),pop:a("pop"),push:a("push"),reduce:a("reduce"),reduceRight:a("reduceRight"),reverse:a("reverse"),shift:a("shift"),slice:a("slice"),some:a("some"),splice:a("splice"),unshift:a("unshift")},t.methods=function(){return{add:function(t){var e=this;return"string"!=typeof t&&t.length?[].forEach.call(t,function(t){tb.dom(t).toArray().forEach(function(t){-1===[].indexOf.call(e,t)&&[].push.call(e,t)})}):tb.dom(t).toArray().forEach(function(t){-1===[].indexOf.call(e,t)&&[].push.call(e,t)}),e.unique()},addClass:function(t){if(!t||"string"!=typeof t)return console.warn("method addClass: missing or wrong pClassNames"),this;var e=t.split(" ").filter(function(t){return!!t});return this.forEach(function(t){var n=(t.getAttribute("class")||"").split(" ").filter(function(t){return!!t});e.forEach(function(t){-1===n.indexOf(t)&&n.push(t)}),t.setAttribute("class",n.join(" "))}),this},append:function(t){var e;return this.forEach(function(n){e=tb.dom(t),[].forEach.call(e,function(t){t.nodeType&&n.appendChild(t)})}),this},appendTo:function(t){return(t=tb.dom(t))[0]&&(t=t[0],this.forEach(function(e){t.appendChild(e)})),this},attr:function(t,e){var n=this,r={};return"object"==typeof t?(Object.keys(t).forEach(function(e){n.forEach(function(n){tb.dom(n).attr(e,t[e])})}),n):arguments.length?void 0===e&&n.length>0?n[0].getAttribute(t):(n.toArray().forEach(function(n){n.setAttribute(t,e)}),n):([].forEach.call(n[0].attributes,function(t){r[t.name]=t.value}),r)},children:function(t){var e=tb.dom();return this.forEach(function(n){var r=void 0!==t&&tb.dom(t);[].forEach.call(n.children,function(t){-1===[].indexOf.call(e,t)&&(!r||-1<[].indexOf.call(r,t))&&e.push(t)})}),e},clean:function(){return this.forEach(function(t){var e=document.createTreeWalker(t,128);for(t.normalize();e.nextNode();)setTimeout(function(t){return function(){t.remove()}}(e.currentNode),0)}),this},descendants:function(t){var e,n=[],r=!!t&&tb.dom(t);return this.forEach(function(t){n=n.concat(tb.dom(t.querySelectorAll("*")).toArray())}),n=tb.dom(n).unique().toArray(),r&&(e=n.filter(function(t){return-1<[].indexOf.call(r,t)})),tb.dom(r?e:n)},empty:function(){return this.forEach(function(t){t.innerHTML=""}),this},filter:function(t){var e,n=tb.dom(t);return"undefined"===t?this:("string"==typeof t?e=[].filter.call(this,function(t){return-1<n.indexOf(t)}):t instanceof Function&&(e=[].filter.call(this,t)),tb.dom(e))},first:function(){var t=tb.dom();return tb.dom.length&&t.push(this[0]),t},hasClass:function(t){var e=!!this[0]&&this[0];if(e)return e.className.split(" ").indexOf(t)>-1},hide:function(){return this.forEach(function(t){var e=window.getComputedStyle(t).getPropertyValue("display");t.style.prevDisplay=e&&"none"!==e?e:"inline",t.style.display="none"}),this},html:function(t){return void 0===t?this[0]?this[0].innerHTML:"":("string"==typeof t&&this.forEach(function(e){e.innerHTML=t}),this)},insertBefore:function(t){var e=!!tb.dom(t)[0]&&tb.dom(t)[0];if(e)return this.forEach(function(n){n.nodeType&&e.parentElement.insertBefore(n.cloneNode(!0),t)}),this},insertAfter:function(t){var e=!!tb.dom(t)[0]&&tb.dom(t)[0],n=e.nextSibling||!1;if(e)return this.forEach(function(t){t.nodeType&&(n?e.parentElement.insertBefore(t.cloneNode(!0),n):e.parentElement.appendChild(t.cloneNode(!0)))}),this},last:function(){var t=tb.dom();return tb.dom.length&&t.push(this.pop()),t},next:function(){var t=tb.dom();return tb.dom.length&&this[0].nextSibling&&t.push(this[0].nextSibling),t},not:function(t){var e=this,n=void 0!==t&&document.querySelectorAll(t);return n?(n.forEach(function(t){var n=[].indexOf.call(e,t);n>-1&&[].splice.apply(e,[n,1])}),e):e},off:function(t,e,n){var r=t.indexOf(" ")>-1?t.split(" "):[t],a="boolean"==typeof n&&n;return this.forEach(function(t){t.nodeType&&(e?r.forEach(function(n){o(t,n,e,a)}):r.forEach(function(e){t["on"+e]=null,t.removeAttribute("on"+e)}))}),this},on:function(t,e,n){var r,a=this,i=t.indexOf(" ")>-1?t.split(" "):[t],c="boolean"==typeof n&&n;return e.once&&((r=function(t,e){return function(e){a.forEach(function(t){t.nodeType&&i.forEach(function(e){o(t,e,r,c)})}),t.apply(e,arguments)}}(e)).that=a,r.remove=function(){a.forEach(function(t){t.nodeType&&i.forEach(function(e){o(t,e,r,c)})})}),a.forEach(function(t){t.nodeType&&i.forEach(function(n){!function(t,e,n,r){t.attachEvent?t.attachEvent("on"+e,n,r):t.addEventListener(e,n,r)}(t,n,r||e,c)})}),r||a},one:function(t,e,n){return e.once=!0,this.on(t,e,n)},parent:function(t){var e=tb.dom(),n=void 0!==t&&tb.dom(t);return this.forEach(function(t){var r=t.parentNode;-1===[].indexOf.call(e,r)&&(!n||-1<[].indexOf.call(n,r))&&[].push.call(e,r)}),e},parents:function(t){var e,n=tb.dom(),r=void 0!==t&&tb.dom(t);return this.forEach(function(t){for(e=t.parentNode;e&&e.tagName&&"HTML"!==e.tagName;)-1===[].indexOf.call(n,e)&&(!r||-1<[].indexOf.call(r,e))&&n.push(e),e=e.parentNode}),n},previous:function(){var t=tb.dom();return tb.dom.length&&this[0].previousSibling&&t.push(this[0].previousSibling),t},remove:function(t){var e=this;return e.forEach(function(t,n){e[n]=t.parentNode.removeChild(t)}),e},removeAttr:function(t){var e,r,o=t&&t.match(n);return this.forEach(function(t){if(r=0,o&&t.nodeType&&1===t.nodeType)for(;e=o[r++];)t.removeAttribute(e)}),this},removeClass:function(t){var e=t.split(" ").filter(function(t){return!!t});return this.forEach(function(t){var n=(t.getAttribute("class")||"").split(" ").filter(function(t){return!!t});e.forEach(function(e){for(;n.indexOf(e)>-1;)n.splice(n.indexOf(e),1);n.length?tb.dom(t).attr("class",n.join(" ")):tb.dom(t).removeAttr("class")})}),this},show:function(){return this.forEach(function(t){t.style.display=t.style.prevDisplay?t.style.prevDisplay:"block"}),this},toArray:function(){return Array.from(this)},toggleClass:function(t){var e;return this.forEach(function(n){(e=tb.dom(n))[e.hasClass(t)?"removeClass":"addClass"](t)}),this},trigger:function(t,e,n,r){var o,a="boolean"!=typeof n||n,i="boolean"!=typeof r||r,c=t.split(" ");return this.forEach(function(t){t.nodeType&&c.forEach(function(n){"createEvent"in document?(o=document.createEvent("HTMLEvents"),tb.extend(o.data,e),o.initEvent(n,a,i),t.dispatchEvent(o)):(o=document.createEventObject(),tb.extend(o.data,e),o.eventType=n,t.fireEvent("on"+o.pThisEventName,o))})}),this},unique:function(){var t=[];return[].forEach.call(this,function(e){-1===t.indexOf(e)&&t.push(e)}),tb.dom(t)},val:function(t){var e,n="input select textarea".split(" "),r="button file image reset submit".split(" ");function o(t){return 1===t.nodeType&&n.indexOf(t.tagName.toLowerCase())>-1&&-1===r.indexOf(t.type)}var a={select:function(t){var e,n=this,r="select-multiple"===n.type;if(!arguments.length)return e=[],[].forEach.call(n.selectedOptions,function(t){if(t.selected&&!(t.disabled||t.parentNode.disabled&&"optgroup"===t.parentNode.nodeName)){var n=t.value;e.push(n)}}),r?e:e[0]?e[0]:"";t=t.constructor!==Array?[t]:t,t=r||t.constructor!==Array?t:[t[0]],[].forEach.call(n.options,function(e){var n,r=t.indexOf(e.value);r+1?(n=t[r],e.selected=!!n):e.selected=!1}),t.forEach(function(t){tb.dom('option[value="'+t+'"]',n).selected=!0})},default:function(t){var e;if("radio"===this.type){var n='[type="radio"][name="'+this.name+'"]',r=tb.dom(this).parents("form").descendants(n);return e="",r.forEach(function(n){var r;void 0!==t?(r=n.value===t,n.checked=!!r,e=n.checked?n.value:e):!0===n.checked&&(e=n.value)}),e}return"checkbox"===this.type?(void 0!==t?(this.checked=!!t,e=this.checked):(e=!1,!0===this.checked&&(e=!0)),e):arguments.length?(null==t&&(t=""),void(this.value=t)):"string"==typeof(e=this.value)?e:null==e?"":e}};return arguments.length?(this.forEach(function(n){o(n)&&(e=a[n.tagName.toLowerCase()]?a[n.tagName.toLowerCase()].call(n,t):a.default.call(n,t))}),this):(this.some(function(t){return!!o(t)&&(e=a[t.tagName.toLowerCase()]?a[t.tagName.toLowerCase()].call(t):a.default.call(t),!0)}),e)},values:function(t){var e,n=this,r=n[0]||void 0;if(!r)return n;if("object"!=typeof t||!r)return r.getValues||(r.getValues=tb.observable({}),tb.dom("input,select,textarea",r).on("keyup change select",tb.debounce(function(){r.getValues(tb.extend({},tb.dom(r).values()))},5))),r.values=r.values?r.values:tb.observable({}),a.prototype={bind:function(t,e){r.getValues.observe(function(){tb.extend(t,r.getValues()),setTimeout(function(){Object.getOwnPropertySymbols(t)[1]&&t[Object.getOwnPropertySymbols(t)[1]]()},0)},e),r.getValues.notify()},observe:function(t,e){r.values.observe(t,e)}},e=new a,Object.defineProperty(n,"values",{enumerable:!0,configurable:!0,set:function(t){r.values.enableNotify(!1),Object.keys(t).forEach(function(e){n.values[e]=t[e]}),r.values.enableNotify().notify()},get:function(t,n){return function(){return tb.dom("input[name],select[name],textarea[name]",t).forEach(function(t){var r=tb.dom(t).attr("name");e.hasOwnProperty(r)||Object.defineProperty(e,r,{enumerable:!0,get:function(){return tb.dom(t).val()},set:function(r){var o=tb.dom(t).val(r);return n(e),o}})}),t.values(e),e}}(r,r.values)}),n.values;var o=tb.dom(r).values();function a(){}Object.keys(t).forEach(function(e){o.hasOwnProperty(e)&&(o[e]=t[e])})}}}(),t.prototype=tb.extend(t.methods,t.arrayMethods),(e=function(e,n){return new t(e,n)}).innerProto=t.prototype,e}(),tb.dom.plugin=function(t,e){var n=tb.dom.innerProto;n[t]?console.warn("tb.dom.plugin(): Cannot overload existing tb method (",t,")"):n[t]=e}),tb.nop=function(){},tb.namespace=function(){function t(t,e){this.namespace=t,this.target=e,this.namespaceArray=t.indexOf(".")?t.split("."):[t],this.forceCreation=!1}return t.prototype={get:function(){return this.forceCreation=!1,this._walk(this.target?this.target:window,this.namespaceArray)},set:function(t){"function"==typeof t&&t.prototype!==Function.prototype&&(t.prototype.namespace=this.namespace);return this.value=t,this.forceCreation=!0,this._walk(this.target?this.target:window,this.namespaceArray)},_walk:function(t,e){!t[e[0]]&&this.forceCreation&&(t[e[0]]={});return e.length<2?(this.forceCreation&&void 0!==this.value&&(t[e[0]]=this.value),t.hasOwnProperty(e[0])?t[e[0]]:void 0):t.hasOwnProperty(e[0])?(t=t[e[0]],e.shift(),this._walk(t,e)):void 0}},function(e,n){return new t(e,n)}}(),tb.attach=function(t){var e=t||document.body,n=tb.dom(e.querySelectorAll("[data-tb]")).toArray();e.getAttribute("data-tb")&&(n=[e].concat(n)),n.forEach(function(t){t.getAttribute("data-tb").split(" ").forEach(function(e){t.tb=t.tb||{},t.tb[e]||new tb(e,null,t)})})},tb.getId=function(){return"id-"+(new Date).getTime()+"-"+Math.random().toString().replace(/\./,"")},tb.Promise=function(){"use strict";var t=null,e={};function n(t){if(t=t||tb.nop,"object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._deferredState=0,this._state=0,this._value=null,this._deferreds=null,t!==tb.nop&&s(t,this)}return n._onHandle=null,n._onReject=null,n.prototype={then:function(t,e){if(!(this instanceof n))return function(t,e,n){return new t.constructor(function(o,a){var i=new tb.Promise(tb.nop);i.then(o,a),r(t,new c(e,n,i))})}(this,t,e);var o=new n(tb.nop);return r(this,new c(t,e,o)),o},catch:function(t){return this.then(null,t)},finally:function(t){var e=this;return this.then(function(r){return n.resolve(t(e._value)).then(function(){return e._value})},function(r){return n.resolve(t(e._value)).then(function(){throw e._value})})},done:function(t,e){(arguments.length?this.then.apply(this,arguments):this).then(null,function(t){setTimeout(function(){throw t},0)})}},n.resolve=function(t){var e=new tb.Promise(function(t,e){});return o(e,t),e},n.reject=function(t){var e=new tb.Promise(function(t,e){});return a(e,t),e},n.all=function(t){var e=t.length,r=tb.observable(e),i=new n,c=new Array(e);return t.forEach(function(t,e){t.then&&"function"==typeof t.then||(t=tb.Promise.resolve(t)),t.then(function(t){c[e]=t}).catch(function(t){0===i._state&&a(i,t._value)}).finally(function(t){r(r()-1)})}),r.observe(function(t){0===t&&(r=null,0===i._state&&o(i,c))}),i},n.race=function(t){var e=new tb.Promise;return t.forEach(function(t,r,i){t.constructor!==n&&(i[r]=n.resolve(t)),i[r].then(function(t){0===e._state&&o(e,t)}).catch(function(t){0===e._state&&a(e,t)})}),e},n;function r(r,i){for(;3===r._state;)r=r._value;if(n._onHandle&&n._onHandle(r),0===r._state)return 0===r._deferredState?(r._deferredState=1,void(r._deferreds=i)):1===r._deferredState?(r._deferredState=2,void(r._deferreds=[r._deferreds,i])):void r._deferreds.push(i);!function(n,r){setTimeout(function(){var i=1===n._state?r.onFulfilled:r.onRejected;if(null!==i){var c=function(n,r){try{return n(r)}catch(n){return t=n,e}}(i,n._value);c===e?a(r.promise,t):o(r.promise,c)}else 1===n._state?o(r.promise,n._value):a(r.promise,n._value)},0)}(r,i)}function o(r,o){if(o===r)return a(r,new TypeError("A promise cannot be resolved with itself."));if(o&&("object"==typeof o||"function"==typeof o)){var c=function(n){try{return n.then}catch(n){return t=n,e}}(o);if(c===e)return a(r,t);if(c===r.then&&o instanceof n)return r._state=3,r._value=o,void i(r);if("function"==typeof c)return void s(c.bind(o),r)}r._state=1,r._value=o,i(r)}function a(t,e){t._state=2,t._value=e,n._onReject&&n._onReject(t,e),i(t)}function i(t){if(1===t._deferredState&&(r(t,t._deferreds),t._deferreds=null),2===t._deferredState){for(var e=0;e<t._deferreds.length;e++)r(t,t._deferreds[e]);t._deferreds=null}}function c(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function s(n,r){var i=!1,c=function(n,r,o){try{n(r,o)}catch(n){return t=n,e}}(n,function(t){i||(i=!0,o(r,t))},function(t){i||(i=!0,a(r,t))});i||c!==e||(i=!0,a(r,t))}}(),tb.Require=function(t){return tb.require(t)},tb.Require.prototype={},tb.require=function(t,e){var n,r=[];if(!t){var o="tb.require: no files given.";return console.warn(o),tb.Promise.reject(o)}return"string"==typeof t&&(t=[t]),t.forEach(function(t){var e=a(t);if(-1===t.split("/").pop().indexOf(".")){var n="tb.require: no file type given for ";return console.warn(n,t),tb.Promise.reject(n+t)}tb.require.repo[e]||(tb.require.repo[e]={}),tb.require.repo[e][t]||(tb.require.repo[e][t]="undefined"==typeof module?function(t){var e,n={css:{tag:"link",attributes:{type:"text/css",rel:"stylesheet",href:"{src}"}},js:{tag:"script",attributes:{type:"text/javascript",src:"{src}"}}},r=a(t),o=t;tb.require.cacheBust;if(n[r])return tb.status.loadCount(tb.status.loadCount()+1),new tb.Promise(function(o,a){var i;e=n[r],(i=document.createElement(e.tag)).async=!0,i.onreadystatechange=i.onload=function(){var t=i.readyState;t&&!/loaded|complete/.test(t)||o("1")},Object.keys(e.attributes).forEach(function(n){i.setAttribute(n,tb.parse(e.attributes[n],{src:t}))}),document.getElementsByTagName("head")[0].appendChild(i)}).finally(function(){tb.status.loadCount(tb.status.loadCount()-1),tb.require.repo[r][t]="done"});var i={url:o};return tb.request(i).finally(function(e){if("json"===r&&e.text)try{tb.require.repo[r][t]=JSON.parse(e.text)}catch(t){console.error("invalid JSON: ",e)}else tb.require.repo[r][t]=e.text})}(t):function(t){var e=require("fs"),n=a(t);return new tb.Promise(function(r,o){var a=t;if("js"===n)try{require(a),r("done.")}catch(t){r('error reading file using require("'+a+'"")')}else if(e.existsSync(a))try{r(e.readFileSync(a,"utf8"))}catch(t){r("error: could not read file ["+a+"]")}else r("error: file not found ["+a+"]")}).finally(function(e){tb.require.repo[n][t]=e})}(t)),r.push(tb.require.repo[e][t])}),n=tb.Promise.all(r),e&&n.finally(function(t){e.call(t)}),n;function a(t){return t.split("?")[0].split(".").pop()}},tb.require.repo={},tb.require.cacheBust=!0,tb.require.loadcount=0,tb.require.get=function(t){return tb.require.repo[t.split("?")[0].split(".").pop()][t]||void 0},tb.webSocket=function(){function t(t){var e=this;e.config=t,e.socket=e.config.protocols?new WebSocket(e.config.url,e.config.protocols):new WebSocket(e.config.url),e.socket.onopen=function(t){e.trigger("open",t)},e.socket.onerror=function(t){e.trigger("error",t)},e.socket.onmessage=function(t){e.trigger("message",t.data)},e.socket.onclose=function(t){e.trigger("close",t)}}return t.prototype={send:function(t){this.socket.send(t)},close:function(){this.socket.close()}},function(e,n){return new tb(t,{url:e,protocols:n})}}(),"undefined"==typeof module&&(tb.request=function(){var t=[],e=0,n=30,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP"];function o(t,e,r,o,c){var s,l=window.setInterval((s=0,function(){t.connection.readyState!==s&&(s=t.connection.readyState),4===s&&(t.aborttimer&&window.clearTimeout(t.aborttimer),window.clearInterval(l),function(t,e,n,r){var o,c;try{o=t.connection.status}catch(t){o=13030}if(o>=200&&o<400){c=a(t,r);try{e(c)}catch(t){tb.debug}}else c=a(t,tb.extend({},r)),n(c);i(t)}(t,e,o,c))}),n);return l}function a(t,e){var n={tId:t.identifier,status:t.connection.status,statusText:t.connection.statusText,responseHeaders:{},requestHeaders:e.headers,text:t.connection.responseText,xml:t.connection.responseXML,options:e};if(t.connection.getAllResponseHeaders().split("\r\n").forEach(function(t){var e=t.split(":")[0],r=t.substr(t.indexOf(":")+1);t&&(n.responseHeaders[e]=r)}),e.dataType&&"json"===e.dataType.toLowerCase())try{n.data=JSON.parse(t.connection.responseText)}catch(e){console.warn("expected JSON, could not parse: "+t.connection.responseText)}return n}function i(n){!function(n){tb.status.loadCount(tb.status.loadCount()-1),t.indexOf(n)&&(e--,t.splice(t.indexOf(n)),0===e&&"complete")}(n),n.connection&&(n.connection=null),n=null}return function(n){var c,s,l="tb"+tb.getId(),u=function(t){var e,n;if("undefined"!=typeof ActiveXObject)for(var o=0;o<r.length;++o)try{n=new ActiveXObject(r[o]),e={connection:n,identifier:t},void r[o]}catch(t){}try{n=new XMLHttpRequest,e={connection:n,identifier:t}}catch(t){}finally{return e}}(l),f=!!n.method&&n.method.toUpperCase()||"GET",d=n.url,h="",p=n.success||tb.nop,b=n.error||tb.nop,m=n.finally||tb.nop,v=(n.statechange||tb.nop,n.cachable||!0),g=n.headers=n.headers||{},y=n.timeout||!1,E=void 0===n.async||!1!==n.async;if(tb.status.loadCount(tb.status.loadCount()+1),t.push(s),e++,"loading",n.type&&"json"===n.type.toLowerCase()&&(g["Content-Type"]="application/json;charset=UTF-8"),void 0!==n.params)switch(c=g&&g["Content-Type"]?g["Content-Type"]:"application/x-www-form-urlencoded"){case"application/json;charset=UTF-8":h=JSON.stringify(n.params);break;default:Object.keys(n.params).forEach(function(t){h+=(h.length>0?"&":"")+t+"="+n.params[t]})}if(!1===v&&(d+=(d.indexOf("?")<0?"?":"&")+"tbUid="+l),u){var O=new tb.Promise(function(t,e){var r,s,l;"GET"!==f&&"DELETE"!==f||""===h||(d=d+(d.indexOf("?")<0?"?":"&")+h),u.src=d,u.connection.open(f,d,E),!0===E&&(u.poll=o(u,t,0,e,n)),Object.keys(g).forEach(function(t){"Content-Type"!==t&&u.connection.setRequestHeader(t,g[t])}),y&&(u.timeoutTimer=window.setTimeout((s=u,l="function"==typeof(r=y).cb&&r.cb,function(){"function"==typeof l&&l(),s.connection.abort(),window.clearInterval(s.poll)}),y.ms)),u.abort=function(t){return function(){window.clearInterval(t.poll),t.connection&&t.connection.abort(),i(t)}}(u),("POST"===f||"PUT"===f)&&""!==h?(u.connection.setRequestHeader("Content-Type",c),u.connection.send(h)):u.connection.send(null),!1===E&&(tb.request.dec(),u.connection.status>=200&&u.connection.status<300?t(a(u,tb.extend({},n))):e(a(u,tb.extend({},n))))});return O.then(function(t){p(t)}).catch(function(t){b(t)}).finally(function(t){m(t)}),O}return!1}}()),tb.stop=function(t){var e=!1;return function(t){return e=t||e}}(),"undefined"==typeof module&&(tb.CRUD=function(t){var e=this;e.data=tb.observable({}),e.config={},tb.extend(e.config,{create:{url:"",method:"POST",success:function(t){e.data(t)}},read:{url:"",method:"GET",success:function(t){e.data(t)}},update:{url:"",method:"PUT",success:function(t){e.data(t)}},delete:{url:"",method:"DELETE",success:function(t){e.data(t)}}},t)},tb.CRUD.prototype=function(){return{create:function(t){var e=tb.extend({},this.config.create);t=t||{},e.url?tb.request(tb.extend(e,{url:t?tb.parse(this.config.create.url,t):this.config.create.url},{params:t})):console.error("no create url given!")},read:function(t){var e=tb.extend({},this.config.read);t=t||{},e.url?tb.request(tb.extend(e,{url:t?tb.parse(this.config.read.url,t):this.config.read.url},{params:t})):console.error("no read url given!")},update:function(t){var e=tb.extend({},this.config.update);t=t||{},e.url?tb.request(tb.extend(e,{url:t?tb.parse(this.config.update.url,t):this.config.update.url},{params:t})):console.error("no update url given!")},delete:function(t){var e=tb.extend({},this.config.delete);t=t||{},e.url?tb.request(tb.extend(e,{url:t?tb.parse(this.config.delete.url,t):this.config.delete.url},{params:t})):console.error("no delete url given!")}}}());class Tb extends tb{constructor(t,e){super(t,e);var n=Symbol("observable"),r=Symbol("onChange");this[n]=tb.observable(!1),this[r]=tb.debounce(function(){this[n](tb.extend({},this))},0)}}var app=new tb,$=tb.dom;app.Body=class extends Tb{constructor(){super();this.handlers={init:this.init},window.onhashchange=function(){let t=window.location.hash,e=t.split("/")[1]||t;console.log(e),$("a.a-"+e).trigger("click")}}get template(){return'\n\t\t<section class="todoapp">\n\t\t\t<app-header class="header"></app-header>\n\t\t\t<app-content class="main"></app-content>\n\t\t</section>\n\t\t<app-footer class="info"></app-footer>\n\t\t<script src="node_modules/todomvc-common/base.js"><\/script>\n\t\t<link rel="stylesheet" href="node_modules/todomvc-common/base.css">'}init(){$(this.target).append($(this.template.trim())).clean()}},app.Content=class extends Tb{constructor(){super();this.handlers={init:this.init},this.store={filter:"all",data:[]}}get namespace(){return"app.Content"}get contentTemplate(){return'\n        <input id="toggle-all" class="toggle-all" type="checkbox">\n        <label for="toggle-all">Mark all as complete</label>\n        <ul class="todo-list"></ul>\n        <footer class="footer">\n            <span class="todo-count" style="position:relative;z-index:1"></span>\n            <button class="clear-completed" style="position:relative;z-index:1">Clear completed</button>\n            <ul class="filters" style="position:relative">\n                <li>\n                    <a href="#" class="a-all selected">All</a>\n                </li>\n                <li>\n                    <a href="#" class="a-active">Active</a>\n                </li>\n                <li>\n                    <a href="#" class="a-completed">Completed</a>\n                </li>\n            </ul>\n        </footer>'}get itemTemplate(){return'\n        <li data-id="{id}">\n            <input class="toggle" type="checkbox" {completed}>\n            <label>{title}</label>\n            <button class="destroy"></button>\n        </li>'}init(){let t=this;$(t.target).append($(t.contentTemplate)).clean().hide(),$("#toggle-all",t.target).on("click",function(e){t.toggleAllCompleted(),e.stopPropagation()}),$("button.clear-completed",t.target).on("click",function(e){t.clearCompleted(),e.stopPropagation()}),$("footer a",t.target).on("click",function(e){$("footer a",t.target).forEach(function(t){t!==e.target?$(t).removeClass("selected"):$(t).addClass("selected",!0)}),t.filterList(e.target),e.preventDefault(),e.stopPropagation()}),t.store.observe(t.renderList.bind(t)),t.store.observe(function(t){try{localStorage.setItem("todos-twobirds-es6",JSON.stringify(t))}catch(t){}});try{let e=JSON.parse(localStorage.getItem("todos-twobirds-es6"));e&&(t.store=e)}catch(t){}}renderList(){let t=this,e=$("ul",t.target)[0];$(e).empty(),$(t.target).hide(),t.store.data.filter(function(e){if("all"===t.store.filter||"active"===t.store.filter&&!e.completed||"completed"===t.store.filter&&e.completed)return e}).forEach(function(n){let r=$(tb.parse(t.itemTemplate.trim(),n));n.completed&&$(r[0]).addClass("completed"),$("button",r[0]).on("click",function(e){t.removeItem(n.id)}),$(r[0]).on("dblclick",function(e){t.editItem(n.id,r[0]),e.stopPropagation()}),$("input",r[0]).on("click",function(e){t.changeCompleted(n.id,e.target)}),n.completed&&r.addClass("completed"),$(e).append(r),$(t.target).show()}),$(e).clean(),t.count(),$("a.a-"+t.store.filter).trigger("click"),t.store.data.length>0&&0===$(e).children().length&&$("a.a-all").trigger("click")}filterList(t){let e=this,n=t.innerText,r=tb.extend({},e.store);$("ul",e.target)[0];if(e.store.filter!==n.toLowerCase())switch(n){case"Active":r.filter="active",e.store=r;break;case"Completed":r.filter="completed",e.store=r;break;default:r.filter="all",e.store=r}}addItem(t){let e=tb.extend({},this.store),n=e.data;n.push({id:tb.getId(),completed:"",title:t}),e.data=n,this.store=e,this.filterList($(".filters a.selected",this.target)[0]),this.count()}editItem(t,e){let n=this,r=e.innerText;$(e).addClass("editing").off("dblclick"),$("label,button",e).addClass("view"),$('<input class="edit">').val(r).on("keyup",function(t){switch(t.key){case"Enter":""!==this.value.trim()&&n.saveEdit(this.value.trim(),e);break;case"Escape":n.cancelEdit(e)}}).on("blur",function(t){n.saveEdit(this.value,e)}).on("dblclick",function(t){t.stopPropagation()}).appendTo(e)[0].focus()}cancelEdit(t){$("input",t)[1].remove(),$(t).removeClass("editing"),$("label,button",t).removeClass("view")}saveEdit(t,e){let n=tb.extend({},this.store);const r=n.data.map(n=>$(e).attr("data-id")===n.id?tb.extend(n,{text:t}):n);n.data=r,this.store=n}removeItem(t){let e=tb.extend({},this.store);const n=e.data.filter(e=>t!==e.id);e.data=n,this.store=e,this.filterList($(".filters a.selected",this.target)[0]),this.count()}changeCompleted(t,e){let n=tb.extend({},this.store);const r=n.data.map(n=>(t===n.id&&(n.completed=e.checked?"checked":"",n.completed?$(e).parent().addClass("completed"):$(e).parent().removeClass("completed")),n));n.data=r,this.store=n,this.count()}toggleAllCompleted(t,e){let n=tb.extend({},this.store),r=n.data,o=this.count()?"checked":"";const a=r.map(t=>(t.completed=o,t));n.data=a,this.store=n,this.count(),$(".filters a",this.target)[0].click()}clearCompleted(){let t=tb.extend({},this.store),e=t.data;t.data=e.filter(t=>!t.completed),this.store=t,this.count(),$(".filters a",this.target)[0].click()}count(){let t=tb.extend({},this.store).data,e=0;return t.forEach(t=>t.completed?e:e++),$(".todo-count").html(e+" item"+(1!==e?"s ":" ")+"left"),0===e?$("#toggle-all").removeAttr("checked"):$("#toggle-all").attr("checked","checked"),e===t.length?$("button.clear-completed").hide():$("button.clear-completed").show(),e}},function(){customElements.define("app-content",class extends HTMLElement{constructor(){super()}connectedCallback(){new tb(app.Content,{},this)}})}(),app.Footer=class extends Tb{constructor(){super();this.handlers={init:this.init}}get template(){return'\n        <p>Double-click to edit a todo</p>\n        <p>Written by <a href="http://twitter.com/FrankieThu">Frank Thuerigen</a></p>\n        <p>Part of <a href="http://todomvc.com">TodoMVC</a></p>'}get namespace(){return"app.Footer"}init(){$(this.target).append($(this.template.trim())).clean()}},function(){customElements.define("app-footer",class extends HTMLElement{constructor(){super()}connectedCallback(){new tb(app.Footer,{},this)}})}(),app.Header=class extends Tb{constructor(){super();this.handlers={init:this.init}}get template(){return'\n        <h1>todos</h1>\n        <input class="new-todo" placeholder="What needs to be done?" autofocus>'}get namespace(){return"app.Header"}init(){let t=this;$(t.target).append($(t.template.trim())).clean(),$("input",t.target).on("keyup",function(e){switch(e.key){case"Enter":let n=$("input",t.target);tb("app-content")[0].addItem(n.val()),n.val("");break;case"Escape":$("input",t.target).val("")}})}},function(){customElements.define("app-header",class extends HTMLElement{constructor(){super()}connectedCallback(){new tb(app.Header,{},this)}})}();