!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";function e(t,n,o){for(var r=arguments,a=arguments.length,i=Array(a>3?a-3:0),l=3;l<a;l++)i[l-3]=r[l];if(!t)return null;if(ve(t)){o=[];for(var u=0;u<t.length;u++){var c=e(t[u]);if(c){var d=11===c.nodeType;if("string"==typeof c.rawNodeName&&d){var s;(s=o).push.apply(s,he(c.childNodes))}else o.push(c)}}return e(ge,null,o)}var f="object"===(void 0===t?"undefined":le(t));if(t&&f&&"parentNode"in t){if(n={},o=[],3===t.nodeType)o=t.nodeValue;else if(1===t.nodeType&&t.attributes.length){n={};for(var h=0;h<t.attributes.length;h++){var p=t.attributes[h],v=p.name,g=p.value;""===g&&v in t?n[v]=t[v]:n[v]=g}}if((1===t.nodeType||11===t.nodeType)&&t.childNodes.length){o=[];for(var y=0;y<t.childNodes.length;y++)o.push(e(t.childNodes[y]))}var m=e(t.nodeName,n,o);return X.set(m,t),m}if(f)return t;i.length&&(o=[o].concat(i));var b=ie.get(),T="#text"===t,N="string"==typeof t;if(b.key="",b.rawNodeName=t,b.nodeName=N?t.toLowerCase():"#document-fragment",b.childNodes.length=0,b.nodeValue="",b.attributes={},T){var E=2===arguments.length?n:o,x=ve(E)?E.join(""):E;return b.nodeType=3,b.nodeValue=String(x||""),b}b.nodeType=t===ge||"string"!=typeof t?11:"#comment"===t?8:1;var w=ve(n)||"object"!==(void 0===n?"undefined":le(n))?n:o,k=ve(w)?w:[w];if(w&&k.length)for(var C=0;C<k.length;C++){var O=k[C];if(Array.isArray(O))for(var S=0;S<O.length;S++)b.childNodes.push(O[S]);else if(11===O.nodeType&&"string"==typeof O.rawNodeName)for(var R=0;R<O.childNodes.length;R++)b.childNodes.push(O.childNodes[R]);else O&&"object"===(void 0===O?"undefined":le(O))?b.childNodes.push(O):O&&b.childNodes.push(e("#text",null,O))}n&&"object"===(void 0===n?"undefined":le(n))&&!ve(n)&&(b.attributes=n),"script"===b.nodeName&&b.attributes.src&&(b.key=String(b.attributes.src)),b.attributes&&"key"in b.attributes&&(b.key=String(b.attributes.key));var _=b;return pe.forEach(function(e,t){(t=e(_))&&(_=t)}),_}function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,o=arguments[2],r=X.get(e);if(r)return r;var a=e.nodeName,i=e.childNodes,l=void 0===i?[]:i;o=o||"svg"===a;var u=null;me.forEach(function(t,n){(n=t(e))&&(u=n)}),u||(u="#text"===a?n.createTextNode(e.nodeValue):"#document-fragment"===a?n.createDocumentFragment():o?n.createElementNS(be,a):n.createElement(a)),X.set(e,u);for(var c=0;c<l.length;c++)u.appendChild(t(l[c],n,o));return u}function n(e){return Te&&e&&e.indexOf&&e.includes("&")?(Te.innerHTML=e,Te.textContent):e}function o(e){return e.replace(/[&<>]/g,function(e){return"&#"+e.charCodeAt(0)+";"})}function r(e){Oe(e);for(var t=0;t<e.childNodes.length;t++)r(e.childNodes[t]);return e}function a(e){Se(e);for(var t=0;t<e.childNodes.length;t++)a(e.childNodes[t]);return e}function i(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Q.forEach(function(t){return e=t.isRendering||e}),Ce.allocated.forEach(function(e){return Ce.free.add(e)}),Ce.allocated.clear(),X.forEach(function(e,t){Ce.protected.has(t)||X.delete(t)})}function l(e){var t=e.state;if(t.isRendering){t.nextTransaction&&t.nextTransaction.promises[0].resolve(t.nextTransaction),t.nextTransaction=e;var n={},o=new Promise(function(e){return n.resolve=e});return o.resolve=n.resolve,e.promises=[o],e.abort()}t.isRendering=!0}function u(e){var t=e.markup,n=e.state,o=e.state.measure;if(o("should update"),"string"==typeof t&&n.markup===t)return e.abort();"string"==typeof t&&(n.markup=t),o("should update")}function c(t){var n=t.state,o=t.domNode,i=t.markup,l=t.options,u=n.previousMarkup,c=l.inner;if(u===o.outerHTML&&n.oldTree||(n.oldTree&&a(n.oldTree),n.oldTree=e(o),X.set(n.oldTree,o),r(n.oldTree)),t.oldTree=n.oldTree,t.newTree||(t.newTree=e(i)),c){var d=t.oldTree,s=t.newTree,f=(d.rawNodeName,d.nodeName),h=d.attributes,p="string"!=typeof s.rawNodeName,v=11===s.nodeType&&!p?s.childNodes:s;t.newTree=e(f,h,v)}}function d(e,t,n){var o=arguments;e||(e=Ae),t||(t=Ae);e.nodeName,t.nodeName,t.nodeType;for(var r=e===Ae,a={old:new Map,new:new Map},i=0;i<Ie.length;i++){var l=Ie[i],u=a[l],c=o[i],s=c&&c.childNodes;if(s&&s.length)for(var f=0;f<s.length;f++){var h=s[f];h.key&&u.set(h.key,h)}}je.forEach(function(o,i){(i=o(e,t,null))&&i!==t&&(t=i,d(null,i,n));for(var l=0;l<t.childNodes.length;l++)(i=o(r?Ae:e.childNodes[l],t.childNodes[l],a))&&(t.childNodes[l]=i)});var p=n=n||{SET_ATTRIBUTE:[],REMOVE_ATTRIBUTE:[],TREE_OPS:[],NODE_VALUE:[]},v=p.SET_ATTRIBUTE,g=p.REMOVE_ATTRIBUTE,y=p.TREE_OPS,m=p.NODE_VALUE,b={INSERT_BEFORE:[],REMOVE_CHILD:[],REPLACE_CHILD:[]},T=b.INSERT_BEFORE,N=b.REMOVE_CHILD,E=b.REPLACE_CHILD,x=1===t.nodeType;if("#text"===t.nodeName)return"#text"!==e.nodeName?m.push(t,t.nodeValue,null):r||e.nodeValue===t.nodeValue||(m.push(e,t.nodeValue,e.nodeValue),e.nodeValue=t.nodeValue),n;if(x){var w=r?Ae:e.attributes,k=t.attributes;for(var C in k){var O=k[C];C in w&&w[C]===k[C]||(r||(w[C]=O),v.push(r?t:e,C,O))}if(!r)for(var S in w)S in k||(g.push(e,S),delete w[S])}var R=t.childNodes;if(r){for(var _=0;_<R.length;_++)d(null,R[_],n);return n}var j=e.childNodes;if(a.old.size||a.new.size){a.old.values();for(var A=0;A<R.length;A++){var I=j[A],M=R[A],D=M.key;if(I){var H=I.key,L=a.new.has(H),P=a.old.has(D);if(L||P)if(L)if(D===H)I.nodeName===M.nodeName?d(I,M,n):(E.push(M,I),e.childNodes[A]=M,d(null,M,n));else{var V=M;D&&P?(V=a.old.get(D),j.splice(j.indexOf(V),1)):D&&(V=M,d(null,M,n)),T.push(e,V,I),j.splice(A,0,V)}else N.push(I),j.splice(j.indexOf(I),1),A-=1;else E.push(M,I),j.splice(j.indexOf(I),1,M),d(null,M,n)}else T.push(e,M,null),j.push(M),d(null,M,n)}}else for(var U=0;U<R.length;U++){var B=j&&j[U],F=R[U];B?B.nodeName===F.nodeName?d(B,F,n):(E.push(F,B),e.childNodes[U]=F,d(null,F,n)):(T.push(e,F,null),j&&j.push(F),d(null,F,n))}if(r)return n;if(j.length!==R.length){for(var z=R.length;z<j.length;z++)N.push(j[z]);j.length=R.length}return(T.length||N.length||E.length)&&(T.length||(b.INSERT_BEFORE=null),N.length||(b.REMOVE_CHILD=null),E.length||(b.REPLACE_CHILD=null),y.push(b)),n}function s(e){var n=e.state.measure,o=e.oldTree,i=e.newTree;e.domNode;n("sync trees"),o.nodeName!==i.nodeName&&11!==i.nodeType?(e.patches={TREE_OPS:[{REPLACE_CHILD:[i,o]}],SET_ATTRIBUTE:[],REMOVE_ATTRIBUTE:[],NODE_VALUE:[]},a(e.oldTree),e.oldTree=e.state.oldTree=i,r(e.oldTree),Q.set(t(i),e.state)):e.patches=d(o,i),n("sync trees")}function f(e,t){Y.get(e).add(t)}function h(e,t){if(!t&&e)Y.get(e).clear();else if(e&&t)Y.get(e).delete(t);else for(var n=0;n<Me.length;n++)Y.get(Me[n]).clear()}function p(e){for(var t=arguments,n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=t[r];var a=Y.get(e),i=[];if(!a.size)return i;if("textChanged"!==e&&3===o[0].nodeType)return i;if(a.forEach(function(e){var t=e.apply(void 0,o);"object"===(void 0===t?"undefined":le(t))&&t.then&&i.push(t)}),"attached"===e||"detached"===e){var l=o[0];[].concat(he(l.childNodes)).forEach(function(t){i.push.apply(i,he(p.apply(void 0,[e,t].concat(he(o.slice(1))))))})}return i}function v(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=[],u=e.TREE_OPS,c=e.NODE_VALUE,d=e.SET_ATTRIBUTE,s=e.REMOVE_ATTRIBUTE,f=i.isSVG,h=i.ownerDocument;if(d.length)for(var v=0;v<d.length;v+=3){var g=d[v],y=d[v+1],m=n(d[v+2]),b=t(g,h,f),T=(Y.get("attributeChanged"),p("attributeChanged",b,y,b.getAttribute(y),m)),N="object"===(void 0===m?"undefined":le(m)),E="function"==typeof m,x=0===y.indexOf("on")?y.toLowerCase():y;if(N||E||!x){if(N&&"style"===x)for(var w=Object.keys(m),k=0;k<w.length;k++)b.style[w[k]]=m[w[k]];else if("string"!=typeof m){b.hasAttribute(x)&&b[x]!==m&&b.removeAttribute(x,""),b.setAttribute(x,"");try{b[x]=m}catch(e){}}}else{var C=null===m||void 0===m;try{b[x]=m}catch(e){}b.setAttribute(x,C?"":m)}T.length&&l.push.apply(l,he(T))}if(s.length)for(var O=0;O<s.length;O+=2)!function(e){var t=s[e],n=s[e+1],o=X.get(t),r=(Y.get("attributeChanged"),o.getAttribute(n)),a=p("attributeChanged",o,n,r,null);a.length?(Promise.all(a).then(function(){return He(o,n)}),l.push.apply(l,he(a))):He(o,n)}(O);for(var S=0;S<u.length;S++){var R=u[S],_=R.INSERT_BEFORE,j=R.REMOVE_CHILD,A=R.REPLACE_CHILD;if(_&&_.length)for(var I=0;I<_.length;I+=3){var M=_[I],D=_[I+1],H=_[I+2],L=X.get(M),P=H&&t(H,h,f);Y.get("attached");H&&r(H);var V=t(D,h,f);r(D),L.insertBefore(V,P);var U=p("attached",V);l.push.apply(l,he(U))}if(j&&j.length)for(var B=0;B<j.length;B++)!function(e){var t=j[e],n=X.get(t),o=(Y.get("detached"),p("detached",n));o.length?(Promise.all(o).then(function(){n.parentNode.removeChild(n),a(t)}),l.push.apply(l,he(o))):(n.parentNode.removeChild(n),a(t))}(B);if(A&&A.length)for(var F=0;F<A.length;F+=2)!function(e){var n=A[e],o=A[e+1],i=X.get(o),u=t(n,h,f);Y.get("attached"),Y.get("detached"),Y.get("replaced");i.parentNode.insertBefore(u,i),r(n);var c=p("attached",u),d=p("detached",i),s=p("replaced",i,u),v=[].concat(he(c),he(d),he(s));v.length?(Promise.all(v).then(function(){i.parentNode.replaceChild(u,i),a(o)}),l.push.apply(l,he(v))):(i.parentNode.replaceChild(u,i),a(o))}(F)}if(c.length)for(var z=0;z<c.length;z+=3){var G=c[z],W=c[z+1],q=c[z+2],K=X.get(G),J=(Y.get("textChanged"),p("textChanged",K,q,W)),Q=K.parentNode;W.includes("&")?K.nodeValue=n(W):K.nodeValue=W,Q&&De.has(Q.nodeName.toLowerCase())&&(Q.nodeValue=o(n(W))),J.length&&l.push.apply(l,he(J))}return l}function g(e){var t=e.domNode,n=e.state,o=e.state.measure,r=e.patches,a=e.promises,i=void 0===a?[]:a;n.isSVG="svg"===e.oldTree.nodeName,n.ownerDocument=t.ownerDocument||document,o("patch node"),i.push.apply(i,he(v(r,n))),o("patch node"),e.promises=i}function y(e){var t=e.promises,n=void 0===t?[]:t;return n.length?Promise.all(n).then(function(){return e.end()}):Promise.resolve(e.end())}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.inner=!0,n.tasks=n.tasks||Le,Ve.create(e,t,n).start()}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.inner=!1,n.tasks=n.tasks||Le,Ve.create(e,t,n).start()}function T(e){var t=Q.get(e);t&&t.oldTree&&a(t.oldTree),Q.delete(e),i()}function N(e){var t=e.subscribe,n=e.unsubscribe,o=e.createTreeHook,r=e.createNodeHook,a=e.syncTreeHook;return Z.add(e),t&&e.subscribe(),o&&Ue.add(o),r&&Be.add(r),a&&Fe.add(a),function(){Z.delete(e),n&&n(),Ue.delete(o),Be.delete(r),Fe.delete(a)}}function E(e,t){"function"==typeof e?e(t):"string"==typeof e&&this[e](t)}function x(e){e.attributes.ref&&E(e.attributes.ref,Ke.get(e)),e.childNodes.forEach(x)}function w(e){qe.has(e)&&qe.get(e).componentDidMount();var t=qe.get(e);x(e),t&&E(t.props.ref,t)}function k(e){qe.has(e)&&qe.get(e).componentDidUnmount();var t=qe.get(e);x(e),t&&E(t.props.ref,null)}function C(e){return e.onceEnded(function(){if(!e.aborted){var t=e.patches;t.TREE_OPS&&t.TREE_OPS.length&&t.TREE_OPS.forEach(function(e){var t=e.INSERT_BEFORE,n=e.REPLACE_CHILD,o=e.REMOVE_CHILD;if(t)for(var r=0;r<t.length;r+=3)w(t[r+1]);if(n)for(var a=0;a<n.length;a+=2)w(n[a]);if(o)for(var i=0;i<o.length;i+=1)k(o[i])})}})}function O(e){var t=this;this.state=$e({},this.state,e),!Ze.has(this)&&this.shouldComponentUpdate()&&(this[Ye](),Ze.set(this,setTimeout(function(){Ze.delete(t),t.shouldComponentUpdate()&&t[Ye]()})))}function S(){this[Ye]()}function R(e){var t=st.call(e,ht),n=e[ht];try{e[ht]=void 0;var o=!0}catch(e){}var r=ft.call(e);return o&&(t?e[ht]=n:delete e[ht]),r}function _(e){return pt.call(e)}function j(e){return null==e?void 0===e?gt:vt:yt&&yt in Object(e)?R(e):_(e)}function A(e){return null!=e&&"object"==(void 0===e?"undefined":le(e))}function I(e){if(!A(e)||j(e)!=bt)return!1;var t=mt(e);if(null===t)return!0;var n=xt.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Et.call(n)==wt}function M(e,t,n){function o(){h===f&&(h=f.slice())}function r(){return s}function a(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return o(),h.push(e),function(){if(t){t=!1,o();var n=h.indexOf(e);h.splice(n,1)}}}function i(e){if(!I(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(p)throw new Error("Reducers may not dispatch actions.");try{p=!0,s=d(s,e)}finally{p=!1}for(var t=f=h,n=0;n<t.length;n++)t[n]();return e}function l(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");d=e,i({type:Ct.INIT})}function u(){var e,t=a;return e={subscribe:function(e){function n(){e.next&&e.next(r())}if("object"!==(void 0===e?"undefined":le(e)))throw new TypeError("Expected the observer to be an object.");return n(),{unsubscribe:t(n)}}},e[kt]=function(){return this},e}var c;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(M)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var d=e,s=t,f=[],h=f,p=!1;return i({type:Ct.INIT}),c={dispatch:i,subscribe:a,getState:r,replaceReducer:l},c[kt]=u,c}function D(e,t){var n=t&&t.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function H(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:Ct.INIT}))throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+Ct.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.')})}function L(){for(var e=arguments,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=e[o];if(0===n.length)return function(e){return e};if(1===n.length)return n[0];var r=n[n.length-1],a=n.slice(0,-1);return function(){return a.reduceRight(function(e,t){return t(e)},r.apply(void 0,arguments))}}function P(e){return{type:St,title:e}}function V(e){return{type:Rt,key:e}}function U(e,t){return{type:_t,key:e,completed:t}}function B(e){return{type:jt,key:e}}function F(e,t){return{type:At,key:e,title:t}}function z(){return{type:It}}function G(e){return{type:Mt,completed:e}}function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,t=arguments[1];switch(t.type){case St:return t.title?Dt({},e,{todos:e.todos.concat({completed:!1,editing:!1,title:t.title.trim(),key:Ht()})}):e;case Rt:return Dt({},e,{todos:e.todos.filter(function(e){return e.key!==t.key})});case _t:var n=e.todos.findIndex(function(e){return e.key===t.key}),o=e.todos[n];return e.todos[n]=Dt({},o,{completed:t.completed}),Dt({},e,{todos:[].concat(he(e.todos))});case jt:var r=e.todos.findIndex(function(e){return e.key===t.key}),a=e.todos[r];return e.todos[r]=Dt({},a,{editing:!0}),Dt({},e,{todos:[].concat(he(e.todos))});case At:var i=e.todos.findIndex(function(e){return e.key===t.key}),l=e.todos[i];return e.todos[i]=Dt({},l,{title:t.title,editing:!1}),Dt({},e,{todos:[].concat(he(e.todos))});case It:return Dt({},e,{todos:e.todos.filter(function(e){return!1===e.completed})});case Mt:return Dt({},e,{todos:e.todos.map(function(e){return Dt({},e,{completed:t.completed})})});default:return e}}function q(e){var t=e.slice(1)||"/";return{type:Pt,path:t}}function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,t=arguments[1];switch(t.type){case Pt:return Vt({},e,{path:t.path});default:return e}}function J(t){return t.todos.map(function(n){return e("li",{key:n.key,class:t.getTodoClassNames(n)},[e("#text",null,"\n\t\t\t"),e("div",{class:"view"},[e("#text",null,"\n\t\t\t\t"),e("input",de({onclick:Ft,class:"toggle",type:"checkbox"},n.completed&&"checked",n.completed&&"checked"),[]),e("#text",null,"\n\t\t\t\t"),e("label",{},[n.title]),e("#text",null,"\n\t\t\t\t"),e("button",{class:"destroy"},[]),e("#text",null,"\n\t\t\t")]),e("#text",null,"\n\n\t\t\t"),e("form",{class:"edit-todo"},[e("#text",null,"\n\t\t\t\t"),e("input",{onblur:t.stopEditing,value:n.title,class:"edit"},[]),e("#text",null,"\n\t\t\t")]),e("#text",null,"\n\t\t")])})}var Q=new Map,X=new Map,Y=new Map,Z=new Set;Z.CreateTreeHookCache=new Set,Z.CreateNodeHookCache=new Set,Z.SyncTreeHookCache=new Set;for(var $=Object.freeze({StateCache:Q,NodeCache:X,TransitionCache:Y,MiddlewareCache:Z}),ee=new Set,te=new Set,ne=new Set,oe={free:ee,allocated:te,protected:ne},re=0;re<1e4;re++)ee.add({rawNodeName:"",nodeName:"",nodeValue:"",nodeType:1,key:"",childNodes:[],attributes:{}});var ae=ee.values(),ie={size:1e4,memory:oe,get:function(){var e=ae.next(),t=e.value,n=void 0===t?{rawNodeName:"",nodeName:"",nodeValue:"",nodeType:1,key:"",childNodes:[],attributes:{}}:t;return e.done&&(ae=ee.values()),ee.delete(n),te.add(n),n},protect:function(e){te.delete(e),ne.add(e)},unprotect:function(e){ne.has(e)&&(ne.delete(e),ee.add(e))}},le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},ce=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),de=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},se=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},fe=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},he=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},pe=Z.CreateTreeHookCache,ve=Array.isArray,ge="#document-fragment",ye="undefined"!=typeof process?process:{env:{NODE_ENV:"development"}},me=Z.CreateNodeHookCache,be="http://www.w3.org/2000/svg",Te=("object"===("undefined"==typeof global?"undefined":le(global))?global:window).document?document.createElement("div"):null,Ne=new Map,Ee="undefined"!=typeof location,xe="undefined"!=typeof process&&process.argv,we=function(){},ke=function(e,t){var n=Ee&&location.search.includes("diff_perf"),o=xe&&process.argv.includes("diff_perf");return n||o?function(n){e&&e.host?n=e.host.constructor.name+" "+n:"function"==typeof t.rawNodeName&&(n=t.rawNodeName.name+" "+n);var o=n+"-end";if(Ne.has(n)){var r=(performance.now()-Ne.get(n)).toFixed(3);Ne.delete(n),performance.mark(o),performance.measure("diffHTML "+n+" ("+r+"ms)",n,o)}else Ne.set(n,performance.now()),performance.mark(n)}:we},Ce=ie.memory,Oe=ie.protect,Se=ie.unprotect,Re=Object.freeze({protectVTree:r,unprotectVTree:a,cleanMemory:i}),_e=Object.assign({decodeEntities:n,escape:o,makeMeasure:ke,memory:Re,Pool:ie,process:ye},$),je=Z.SyncTreeHookCache,Ae={},Ie=["old","new"],Me=["attached","detached","replaced","attributeChanged","textChanged"];Me.forEach(function(e){return Y.set(e,new Set)});var De=new Set(["script","noscript","style","code","template"]),He=function(e,t){e.removeAttribute(t),t in e&&(e[t]=void 0)},Le=[l,u,c,s,g,y],Pe={schedule:l,shouldUpdate:u,reconcileTrees:c,syncTrees:s,patchNode:g,endAsPromise:y},Ve=function(){function e(t,n,o){ue(this,e),this.domNode=t,this.markup=n,this.options=o,this.state=Q.get(t)||{measure:ke(t,n)},this.tasks=[].concat(o.tasks),this.endedCallbacks=new Set,Q.set(t,this.state)}return ce(e,null,[{key:"create",value:function(t,n,o){return new e(t,n,o)}},{key:"renderNext",value:function(t){if(t.nextTransaction){var n=t.nextTransaction,o=t.nextTransaction.promises,r=o&&o[0];t.nextTransaction=void 0,n.aborted=!1,n.tasks.pop(),e.flow(n,n.tasks),o&&o.length>1?Promise.all(o.slice(1)).then(function(){return r.resolve()}):r&&r.resolve()}}},{key:"flow",value:function(e,t){for(var n=e,o=0;o<t.length;o++){if(e.aborted)return n;if(void 0!==(n=t[o](e))&&n!==e)return n}}},{key:"assert",value:function(e){}},{key:"invokeMiddleware",value:function(e){var t=e.tasks;Z.forEach(function(n){var o=n(e);o&&t.push(o)})}}]),ce(e,[{key:"start",value:function(){this.domNode;var t=this.state.measure,n=this.tasks,o=n.pop();return this.aborted=!1,e.invokeMiddleware(this),t("render"),n.push(o),e.flow(this,n)}},{key:"abort",value:function(){this.state;return this.aborted=!0,this.tasks[this.tasks.length-1](this)}},{key:"end",value:function(){var t=this,n=this.state,o=this.domNode,r=this.options,a=n.measure;r.inner;return a("finalize"),this.completed=!0,a("finalize"),a("render"),this.endedCallbacks.forEach(function(e){return e(t)}),this.endedCallbacks.clear(),n.previousMarkup=o.outerHTML,n.isRendering=!1,i(),e.renderNext(n),this}},{key:"onceEnded",value:function(e){this.endedCallbacks.add(e)}}]),e}(),Ue=Z.CreateTreeHookCache,Be=Z.CreateNodeHookCache,Fe=Z.SyncTreeHookCache,ze={VERSION:"1.0.0-beta-runtime",addTransitionState:f,removeTransitionState:h,release:T,createTree:e,use:N,outerHTML:b,innerHTML:m,html:e,defaultTasks:Le},Ge=Object.assign(_e,ze,{defaultTasks:Le,tasks:Pe,createNode:t});ze.Internals=Ge,"function"==typeof devTools&&(N(devTools(Ge)),console.info("diffHTML DevTools Found and Activated...")),("undefined"!=typeof window?window:global).process=Ge.process;var We=new WeakMap,qe=new WeakMap,Ke=Ge.NodeCache,Je=Object.assign;C.syncTreeHook=function(t,n){for(var o=0;o<n.childNodes.length;o++){var r=t&&t.childNodes&&t.childNodes[o],a=n.childNodes[o];if(a&&"function"==typeof a.rawNodeName){var i=a.rawNodeName,l=qe.get(r),u=a.childNodes,c=Je({},a.attributes,{children:u}),d=i.prototype,s=r&&l instanceof i&&l,f=!s&&d&&new i(c),h=s||f,p=null;if(s?(s.componentWillReceiveProps(c),s.shouldComponentUpdate()&&(p=s.render(c,s.state))):p=e(h&&h.render?h.render(c,h.state):i(c)),!p)continue;return 11===p.nodeType?(n.childNodes=[].concat(p.childNodes),h&&(We.set(h,t),qe.set(t,h))):(n.childNodes[o]=p,h&&(We.set(h,p),qe.set(p,h))),n}}};var Qe,Xe={shouldComponentUpdate:function(){return!0},componentWillReceiveProps:function(){},componentWillMount:function(){},componentDidMount:function(){},componentDidUpdate:function(){},componentWillUnmount:function(){},componentDidUnmount:function(){}},Ye=Symbol("diff.render"),Ze=new WeakMap,$e=Object.assign,et=Object.assign,tt=Ge.NodeCache,nt=Object.keys,ot=Object.assign,rt=function(){return N(C)},at=rt(),it=function(e){return et(e.prototype,Xe,{forceUpdate:S,setState:O}),e}(function(){function e(e){var t=this.props=ot({},e),n=(this.state={},this.context={},this.constructor),o=n.defaultProps;void 0===o&&(o={});var r=n.propTypes;void 0===r&&(r={});var a=n.childContextTypes;void 0===a&&(a={});var i=n.contextTypes;void 0===i&&(i={});n.name;nt(o).forEach(function(e){e in t&&void 0!==t[e]||(t[e]=o[e])})}return e.subscribeMiddleware=function(){return rt()},e.unsubscribeMiddleware=function(){return at(),rt},e.prototype[Ye]=function(){var e=this,t=We.get(this);b(tt.get(t),this.render()).then(function(){e.componentDidUpdate()})},e}()),lt="object"==("undefined"==typeof global?"undefined":le(global))&&global&&global.Object===Object&&global,ut="object"==("undefined"==typeof self?"undefined":le(self))&&self&&self.Object===Object&&self,ct=(lt||ut||Function("return this")()).Symbol,dt=Object.prototype,st=dt.hasOwnProperty,ft=dt.toString,ht=ct?ct.toStringTag:void 0,pt=Object.prototype.toString,vt="[object Null]",gt="[object Undefined]",yt=ct?ct.toStringTag:void 0,mt=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object),bt="[object Object]",Tt=Function.prototype,Nt=Object.prototype,Et=Tt.toString,xt=Nt.hasOwnProperty,wt=Et.call(Object),kt=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}(Qe="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()),Ct={INIT:"@@redux/INIT"},Ot=Object.assign||function(e){for(var t=arguments,n=1;n<arguments.length;n++){var o=t[n];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},St="ADD_TODO",Rt="REMOVE_TODO",_t="TOGGLE_COMPLETION",jt="START_EDITING",At="STOP_EDITING",It="CLEAR_COMPLETED",Mt="TOGGLE_ALL",Dt=Object.assign,Ht=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},Lt={todos:JSON.parse(localStorage["diffhtml-todos"]||"[]"),getByStatus:function(e){return this.todos.filter(function(t){switch(e){case"active":return!t.completed;case"completed":return t.completed}return!0})}},Pt="SET_HASH_STATE",Vt=Object.assign,Ut={path:location.hash.slice(1)||"/"},Bt=L(function(){for(var e=arguments,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=e[o];return function(e){return function(t,o,r){var a=e(t,o,r),i=a.dispatch,l=[],u={getState:a.getState,dispatch:function(e){return i(e)}};return l=n.map(function(e){return e(u)}),i=L.apply(void 0,l)(a.dispatch),Ot({},a,{dispatch:i})}}}(),window.devToolsExtension?window.devToolsExtension():function(e){return e})(M)(function(e){for(var t=Object.keys(e),n={},o=0;o<t.length;o++){var r=t[o];"function"==typeof e[r]&&(n[r]=e[r])}var a,i=Object.keys(n);try{H(n)}catch(e){a=e}return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];if(a)throw a;for(var o=!1,r={},l=0;l<i.length;l++){var u=i[l],c=n[u],d=e[u],s=c(d,t);if(void 0===s){var f=D(u,t);throw new Error(f)}r[u]=s,o=o||s!==d}return o?r:e}}({todoApp:W,url:K,lastAction:function(e,t){return t}}),{}),Ft=function(e){return e.stopPropagation()},zt=function(t){function n(e){ue(this,n);var t=fe(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.addTodo=function(e){e.preventDefault();var t=e.target.parentNode.querySelector(".new-todo");Bt.dispatch(P(t.value)),t.value=""},t.removeTodo=function(e){if(e.target.matches(".destroy")){var t=e.target.parentNode.parentNode;Bt.dispatch(V(t.key))}},t.toggleCompletion=function(e){if(e.target.matches(".toggle")){var t=e.target.parentNode.parentNode;Bt.dispatch(U(t.key,e.target.checked))}},t.startEditing=function(e){if(e.target.matches("label")){var t=e.target.parentNode.parentNode;Bt.dispatch(B(t.key)),t.querySelector("form input").focus()}},t.stopEditing=function(e){e.preventDefault();var t=e.target.parentNode,n="li"===t.nodeName.toLowerCase()?t:t.parentNode,o=n.querySelector(".edit").value.trim();o?Bt.dispatch(F(n.key,o)):Bt.dispatch(V(n.key))},t.clearCompleted=function(e){e.target.matches(".clear-completed")&&Bt.dispatch(z())},t.toggleAll=function(e){e.target.matches(".toggle-all")&&Bt.dispatch(G(e.target.checked))},t.handleKeyDown=function(e){if(e.target.matches(".edit, .new-todo"))switch(e.keyCode){case 27:var n=Bt.getState()[t.props.reducer],o=e.target.parentNode.parentNode;e.target.value=n.todos.find(function(e){return e.key===o.key}).title,t.stopEditing(e);break;case 13:t.onSubmitHandler(Object.assign({},e,{preventDefault:function(){return e.preventDefault()},target:e.target.parentNode}))}},t.onSubmitHandler=function(e){e.preventDefault(),e.target.matches(".add-todo")?t.addTodo(e):e.target.matches(".edit-todo")&&t.stopEditing(e)},t.onClickHandler=function(e){e.target.matches(".destroy")?t.removeTodo(e):e.target.matches(".toggle-all")?t.toggleAll(e):e.target.matches(".clear-completed")&&t.clearCompleted(e)},t.getTodoClassNames=function(e){return[e.completed?"completed":"",e.editing?"editing":""].filter(Boolean).join(" ")},t.setCheckedState=function(){return Bt.getState()[t.props.reducer].todos.filter(function(e){return!e.completed}).length?"":"checked"},t.getNavClass=function(e){return Bt.getState().url.path===e?"selected":void 0},t.unsubscribeStore=Bt.subscribe(function(){return t.forceUpdate()}),t}return se(n,t),ce(n,[{key:"render",value:function(){var t=Bt.getState(),n=t[this.props.reducer],o=t.url.path.slice(1),r=n.todos,a=n.getByStatus(o),i=n.getByStatus("active"),l=n.getByStatus("completed");return localStorage["diffhtml-todos"]=JSON.stringify(r),[e("section",{class:"todoapp",onsubmit:this.onSubmitHandler,onclick:this.onClickHandler,onkeydown:this.handleKeyDown,ondblclick:this.startEditing,onchange:this.toggleCompletion},[e("#text",null,"\n\n        "),e("header",{class:"header"},[e("#text",null,"\n          "),e("h1",{},[e("#text",null,"todos")]),e("#text",null,"\n\n          "),e("form",{class:"add-todo"},[e("#text",null,"\n            "),e("input",{class:"new-todo",placeholder:"What needs to be done?",autofocus:""},[]),e("#text",null,"\n          ")]),e("#text",null,"\n        ")]),r.length&&[e("section",{class:"main"},[e("#text",null,"\n            "),e("input",de({class:"toggle-all",id:"toggle-all",type:"checkbox"},this.setCheckedState(),this.setCheckedState()),[]),e("#text",null,"\n            "),e("label",{for:"toggle-all"},[e("#text",null,"Mark all as complete")]),e("#text",null,"\n\n            "),e("ul",{class:"todo-list"},[e("#text",null,"\n              "),e(J,{stopEditing:this.stopEditing,getTodoClassNames:this.getTodoClassNames,todos:a},[]),e("#text",null,"\n            }")]),e("#text",null,"\n          ")]),e("#text",null,"\n\n          "),e("footer",{class:"footer"},[e("#text",null,"\n            "),e("span",{class:"todo-count"},[e("#text",null,"\n              "),e("strong",{},[String(i.length)]),e("#document-fragment",null,[1==i.length?" item":" items",e("#text"," left\n            ")])]),e("#text",null,"\n\n            "),e("ul",{class:"filters"},[e("#text",null,"\n              "),e("li",{},[e("#text",null,"\n                "),e("a",{href:"#/",class:this.getNavClass("/")},[e("#text",null,"All")]),e("#text",null,"\n              ")]),e("#text",null,"\n              "),e("li",{},[e("#text",null,"\n                "),e("a",{href:"#/active",class:this.getNavClass("/active")},[e("#text",null,"Active")]),e("#text",null,"\n              ")]),e("#text",null,"\n              "),e("li",{},[e("#text",null,"\n                "),e("a",{href:"#/completed",class:this.getNavClass("/completed")},[e("#text",null,"Completed")]),e("#text",null,"\n              ")]),e("#text",null,"\n            ")]),l.length&&e("button",{class:"clear-completed",onclick:this.clearCompleted},[e("#text",null,"Clear completed")])])]]),e("#text",null,"\n\n      "),e("footer",{class:"info"},[e("#text",null,"\n        "),e("p",{},[e("#text",null,"Double-click to edit a todo")]),e("#text",null,"\n\n        "),e("p",{},[e("#text",null,"\n          Created by "),e("a",{href:"http://github.com/tbranyen"},[e("#text",null,"Tim Branyen")]),e("#text",null,"\n          using "),e("a",{href:"http://diffhtml.org"},[e("#text",null,"diffHTML 1.0")]),e("#text",null,"\n        ")]),e("#text",null,"\n\n        "),e("p",{},[e("#text",null,"Part of "),e("a",{href:"http://todomvc.com"},[e("#text",null,"TodoMVC")])]),e("#text",null,"\n      ")])]}}]),n}(it),Gt=function(e){return Bt.dispatch(q(e))};m(document.querySelector("todo-app"),e(zt,{reducer:"todoApp"},[])),window.onhashchange=function(e){return Gt(location.hash)}});